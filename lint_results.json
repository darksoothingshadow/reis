
> reis_new@4.0.0 lint
> eslint . --format json

[{"filePath":"/root/reis/e2e/fixtures/extension.ts","messages":[{"ruleId":"no-empty-pattern","severity":2,"message":"Unexpected empty object pattern.","line":28,"column":28,"nodeType":"ObjectPattern","messageId":"unexpected","endLine":28,"endColumn":30},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"use\" is called in function \"extensionContext\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":57,"column":11,"nodeType":"Identifier","endLine":57,"endColumn":14},{"ruleId":"no-empty-pattern","severity":2,"message":"Unexpected empty object pattern.","line":61,"column":23,"nodeType":"ObjectPattern","messageId":"unexpected","endLine":61,"endColumn":25},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"use\" is called in function \"extensionId\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":70,"column":11,"nodeType":"Identifier","endLine":70,"endColumn":14},{"ruleId":"no-empty-pattern","severity":2,"message":"Unexpected empty object pattern.","line":74,"column":25,"nodeType":"ObjectPattern","messageId":"unexpected","endLine":74,"endColumn":27},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"use\" is called in function \"consoleErrors\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":76,"column":11,"nodeType":"Identifier","endLine":76,"endColumn":14},{"ruleId":"no-empty-pattern","severity":2,"message":"Unexpected empty object pattern.","line":79,"column":22,"nodeType":"ObjectPattern","messageId":"unexpected","endLine":79,"endColumn":24},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"use\" is called in function \"pageErrors\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":81,"column":11,"nodeType":"Identifier","endLine":81,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"use\" is called in function \"extensionPage\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":132,"column":11,"nodeType":"Identifier","endLine":132,"endColumn":14}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test as base, chromium, BrowserContext, Page } from '@playwright/test';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport { fileURLToPath } from 'url';\nimport { calculateExtensionId } from '../utils/id';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Path to built extension\nconst EXTENSION_PATH = path.join(__dirname, '..', '..', 'dist');\n\n// Temporary user data directory\nconst USER_DATA_DIR = path.join(__dirname, '..', '..', '.playwright-user-data');\n\nexport type ExtensionFixtures = {\n  extensionContext: BrowserContext;\n  extensionPage: Page;\n  extensionId: string;\n  /** Console errors captured during the test - attached BEFORE page load */\n  consoleErrors: string[];\n  /** Page errors (uncaught exceptions) captured during the test */\n  pageErrors: string[];\n};\n\nexport const test = base.extend<ExtensionFixtures>({\n  // Browser context with extension loaded\n  extensionContext: async ({}, use) => {\n    // Verify extension exists\n    if (!fs.existsSync(path.join(EXTENSION_PATH, 'manifest.json'))) {\n      throw new Error(\n        `Extension not found at ${EXTENSION_PATH}. Run \"npm run build:quick\" first.`\n      );\n    }\n\n    // Launch browser with extension\n    const context = await chromium.launchPersistentContext(USER_DATA_DIR, {\n      headless: false,\n      args: [\n        // '--headless=new', // Disable for Xvfb test\n        `--disable-extensions-except=${EXTENSION_PATH}`,\n        `--load-extension=${EXTENSION_PATH}`,\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n      ],\n    });\n\n    // Load saved auth state if available\n    const storageStatePath = path.join(__dirname, '..', '..', 'storageState.json');\n    if (fs.existsSync(storageStatePath)) {\n      const storageState = JSON.parse(fs.readFileSync(storageStatePath, 'utf-8'));\n      if (storageState.cookies && storageState.cookies.length > 0) {\n        await context.addCookies(storageState.cookies);\n      }\n    }\n\n    await use(context);\n    await context.close();\n  },\n  // Extension ID\n  extensionId: async ({}, use) => {\n    const manifestPath = path.join(__dirname, '..', '..', 'public', 'manifest.json');\n    const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf-8'));\n    \n    if (!manifest.key) {\n        throw new Error('Manifest does not contain a \"key\" field. Extension ID cannot be determined.');\n    }\n\n    const EXTENSION_ID = calculateExtensionId(manifest.key);\n    await use(EXTENSION_ID);\n  },\n\n  // Shared error arrays - populated before page load\n  consoleErrors: async ({}, use) => {\n    const errors: string[] = [];\n    await use(errors);\n  },\n\n  pageErrors: async ({}, use) => {\n    const errors: string[] = [];\n    await use(errors);\n  },\n\n  // Page for extension popup/UI - with console monitoring attached BEFORE navigation\n  extensionPage: async ({ extensionContext, extensionId, consoleErrors, pageErrors }, use) => {\n    const page = await extensionContext.newPage();\n    \n    // CRITICAL: Attach listeners BEFORE navigation to catch all errors\n    // This is the Munger-style fix: monitor from the very start\n    page.on('console', msg => {\n      if (msg.type() === 'error') {\n        const text = msg.text();\n        // Filter out favicon errors (common, harmless)\n        if (!text.includes('favicon')) {\n          consoleErrors.push(text);\n        }\n      }\n    });\n    \n    // Catch uncaught exceptions (pageerror)\n    page.on('pageerror', err => {\n      pageErrors.push(err.message);\n    });\n    \n    // Mock the success rates API to return predictable test data\n    await page.route('**/api/success-rates*', async route => {\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify({\n          courseCode: 'TEST-COURSE',\n          stats: [{\n            semesterName: 'LS 2024/2025',\n            totalPass: 85,\n            totalFail: 15,\n            terms: [\n              { term: 'term√≠n 1', grades: { A: 20, B: 30, C: 20, D: 10, E: 5, F: 10, FN: 5 }, pass: 85, fail: 15 }\n            ]\n          }],\n          lastUpdated: new Date().toISOString()\n        })\n      });\n    });\n    \n    // Navigate to extension popup\n    // Use a fixed URL for stability in CI/CD environment\n    await page.goto(`chrome-extension://${extensionId}/index.html`, {\n      waitUntil: 'networkidle',\n      timeout: 30000,\n    });\n\n    await use(page);\n  },\n});\n\nexport { expect } from '@playwright/test';\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/global-setup.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":12,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { chromium, FullConfig } from '@playwright/test';\nimport * as dotenv from 'dotenv';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\ndotenv.config();\n\nasync function globalSetup(config: FullConfig) {\n  const username = process.env.MENDELU_USER;\n  const password = process.env.MENDELU_PASS;\n\n  if (!username || !password) {\n    console.log('‚ö†Ô∏è  MENDELU_USER or MENDELU_PASS not set in .env');\n    console.log('   Skipping login - tests requiring auth will fail');\n    \n    // Create empty storage state so tests can still run\n    const emptyState = { cookies: [], origins: [] };\n    fs.writeFileSync(\n      path.join(__dirname, '..', 'storageState.json'),\n      JSON.stringify(emptyState)\n    );\n    return;\n  }\n\n  console.log('üîê Logging into is.mendelu.cz...');\n  \n  const browser = await chromium.launch({ headless: true });\n  const context = await browser.newContext();\n  const page = await context.newPage();\n\n  try {\n    await page.goto('https://is.mendelu.cz/auth/login.pl', { timeout: 30000 });\n\n    // Check if already logged in (redirected away from login)\n    if (!page.url().includes('login.pl')) {\n      console.log('   ‚úÖ Already logged in');\n    } else {\n      // Fill login form\n      await page.fill('input[name=\"credential_0\"]', username);\n      await page.fill('input[name=\"credential_1\"]', password);\n      await page.click('input[type=\"submit\"], button[type=\"submit\"]');\n      // Wait for navigation to complete (success or failure)\n      await page.waitForLoadState('networkidle');\n\n      const url = page.url();\n      if (url.includes('/auth/')) {\n          console.log('   ‚úÖ Login successful (URL contains /auth/)');\n          await context.storageState({ path: path.join(__dirname, '..', 'storageState.json') });\n      } else {\n          // We are likely still on login page or some error page\n          console.log(`   ‚ùå Login failed? URL: ${url}`);\n          \n          // Try to dump content\n          try {\n              const content = await page.content();\n              fs.writeFileSync('login-failure.html', content);\n              await page.screenshot({ path: 'login-failure.png' });\n              \n              // simple check for known error text (czech)\n              if (content.includes('≈†patn√© jm√©no nebo heslo') || content.includes('Neplatn√© p≈ôihl√°≈°en√≠')) {\n                   throw new Error('Login failed: Invalid username or password.');\n              }\n          } catch (e) {\n              console.log('   ‚ö†Ô∏è Could not capture failure evidence:', e);\n          }\n          \n          throw new Error(`Login failed - stuck on ${url}`);\n      }\n      \n      console.log('   ‚úÖ Login successful');\n    }\n\n    // Save authentication state\n    await context.storageState({ \n      path: path.join(__dirname, '..', 'storageState.json') \n    });\n    console.log('   üíæ Session saved to storageState.json');\n    \n  } catch (error) {\n    console.error('   ‚ùå Login failed:', error);\n    throw error;\n  } finally {\n    await browser.close();\n  }\n}\n\nexport default globalSetup;\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/serenity/actors.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1474,1477],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1474,1477],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/serenity/specs/smoke.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/serenity/specs/success-rate.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3368,3371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3368,3371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3454,3457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3454,3457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":118,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4554,4557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4554,4557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4640,4643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4640,4643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, beforeAll, afterAll } from '@serenity-js/playwright-test';\nimport { actorCalled, engage, Duration, Wait, Interaction } from '@serenity-js/core';\nimport { Click, PageElement, By } from '@serenity-js/web';\nimport { BrowseTheWebWithPlaywright } from '@serenity-js/playwright';\nimport { ExtensionCast, createExtensionContext } from '../actors';\nimport { OpenExtensionPopup, WaitForHydration } from '../tasks';\nimport { BrowserContext } from '@playwright/test';\nimport { calculateExtensionId } from '../../utils/id';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\ndescribe('Success Rate Tab', () => {\n    let context: BrowserContext;\n    \n    const manifestPath = path.resolve(__dirname, '../../../public/manifest.json');\n    const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf-8'));\n    const EXTENSION_ID = calculateExtensionId(manifest.key);\n\n    const mockStats = {\n        \"EBC-ALG\": {\n            \"courseCode\": \"EBC-ALG\",\n            \"lastUpdated\": new Date().toISOString(),\n            \"stats\": [\n                {\n                    \"semesterName\": \"Zima\",\n                    \"semesterId\": \"2023-Z\",\n                    \"year\": 2023,\n                    \"totalPass\": 85,\n                    \"totalFail\": 15,\n                    \"terms\": [\n                        {\n                            \"term\": \"≈ò√°dn√Ω\",\n                            \"grades\": { \"A\": 10, \"B\": 15, \"C\": 20, \"D\": 20, \"E\": 20, \"F\": 10, \"FN\": 5 },\n                            \"pass\": 85,\n                            \"fail\": 15\n                        }\n                    ]\n                },\n                {\n                    \"semesterName\": \"L√©to\",\n                    \"semesterId\": \"2023-L\",\n                    \"year\": 2023,\n                    \"totalPass\": 40,\n                    \"totalFail\": 60,\n                    \"terms\": [\n                        {\n                            \"term\": \"≈ò√°dn√Ω\",\n                            \"grades\": { \"A\": 2, \"B\": 3, \"C\": 5, \"D\": 10, \"E\": 20, \"F\": 40, \"FN\": 20 },\n                            \"pass\": 40,\n                            \"fail\": 60\n                        }\n                    ]\n                }\n            ]\n        }\n    };\n\n    const mockSchedule = [\n        {\n            \"id\": \"1\",\n            \"courseCode\": \"EBC-ALG\",\n            \"courseName\": \"Algoritmy\",\n            \"courseId\": \"12345\",\n            \"date\": new Date().toISOString().split('T')[0].replace(/-/g, ''),\n            \"startTime\": \"08:00\",\n            \"endTime\": \"09:30\",\n            \"room\": \"Q01\",\n            \"teachers\": [{ \"fullName\": \"John Doe\", \"shortName\": \"Doe J.\", \"id\": \"1\" }],\n            \"isSeminar\": \"false\"\n        }\n    ];\n\n    beforeAll(async () => {\n        context = await createExtensionContext();\n        engage(new ExtensionCast(context));\n    });\n\n    afterAll(async () => {\n        if (context) {\n            await context.close();\n        }\n    });\n\n    it('visual audit', async () => {\n        const Charlie = actorCalled('Charlie');\n\n        await Charlie.attemptsTo(\n            OpenExtensionPopup(EXTENSION_ID),\n            WaitForHydration(),\n            \n            // Inject mock data\n            Interaction.where('#actor injects mock data', async (actor: any) => {\n                const page = await (BrowseTheWebWithPlaywright.as(actor) as any).currentPage();\n                const nativePage = await page.nativePage();\n                await nativePage.evaluate(({ stats, schedule }) => {\n                    localStorage.setItem('reis_success_rates', JSON.stringify({ data: stats, lastUpdated: new Date().toISOString() }));\n                    localStorage.setItem('reis_schedule', JSON.stringify(schedule));\n                    window.location.reload();\n                }, { stats: mockStats, schedule: mockSchedule });\n            }),\n            \n            WaitForHydration(),\n            Wait.for(Duration.ofMilliseconds(1000)),\n\n            // Open the subject drawer\n            Click.on(PageElement.located(By.css('[data-testid=\"calendar-event-card\"]'))),\n            Wait.for(Duration.ofMilliseconds(500)),\n            \n            // Switch to Stats tab\n            Click.on(PageElement.located(By.css('[data-testid=\"tab-stats\"]'))),\n            Wait.for(Duration.ofMilliseconds(1000)),\n            \n            // Take screenshots for visual verification\n            Interaction.where('#actor takes screenshots', async (actor: any) => {\n                const page = await (BrowseTheWebWithPlaywright.as(actor) as any).currentPage();\n                const nativePage = await page.nativePage();\n                \n                // Ensure artifacts directory is accessible\n                const artifactsPath = path.resolve(process.cwd(), 'artifacts');\n                if (!fs.existsSync(artifactsPath)) fs.mkdirSync(artifactsPath, { recursive: true });\n\n                await nativePage.screenshot({ path: path.join(artifactsPath, 'success_rate_light.png'), fullPage: true });\n                \n                // Toggle Dark Mode\n                await nativePage.evaluate(() => {\n                    document.documentElement.setAttribute('data-theme', 'mendelu-dark');\n                });\n                await nativePage.waitForTimeout(1000);\n                await nativePage.screenshot({ path: path.join(artifactsPath, 'success_rate_dark.png'), fullPage: true });\n            })\n        );\n    });\n});\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/serenity/specs/visual-proof.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/serenity/tasks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/content-script.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/exam-timeline.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/file-drawer.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/global-success-rate.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/popup.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/search.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/student-data-scraper.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'expect' is defined but never used.","line":1,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[564,567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[564,567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'currentYear' is assigned a value but never used.","line":17,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":172,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":172,"endColumn":28},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":172,"column":30,"nodeType":"BlockStatement","messageId":"unexpected","endLine":172,"endColumn":32,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[7157,7157],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7838,7841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7838,7841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":239,"column":79,"nodeType":null,"messageId":"unusedVar","endLine":239,"endColumn":80},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":239,"column":82,"nodeType":"BlockStatement","messageId":"unexpected","endLine":239,"endColumn":84,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[10548,10548],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\ntest.describe('Student Subject Data Scraper', () => {\n  // Configuration - Restricted to PEF and last 5 semesters\n  const FACULTY_IDS = [2]; // PEF only\n  const TARGET_COURSES = ['EBC-ALG', 'EBC-AP', 'EBC-KOM', 'EBC-TZI', 'EBC-UICT', 'EBC-ZOO', 'ALG', 'ICT', 'TZI'];\n  const MAX_SEMESTERS = 5;\n  \n  // State\n  const results: any[] = [];\n  const currentYear = new Date().getFullYear();\n\n  test('scrape subject statistics', async ({ page }) => {\n    // Increase timeout for long scraping session\n    test.setTimeout(10 * 60 * 1000); // 10 minutes\n\n    console.log(`üöÄ Starting scraper (PEF only, last ${MAX_SEMESTERS} semesters)...`);\n\n      // Level 1: Faculty Selection\n      console.log(`\\nüè´ Level 1: Investigating Faculty Selection Portal...`);\n      await page.goto(`https://is.mendelu.cz/auth/student/hodnoceni.pl?lang=cz`);\n      \n      const pageContent = await page.content();\n      if (pageContent.includes('vyber-fakult')) {\n          console.log(`   [DEBUG] Found 'vyber-fakult' on landing page.`);\n      } else {\n          console.log(`   [DEBUG] No 'vyber-fakult' found on landing page.`);\n          // Maybe we are already on a faculty page?\n      }\n\n      for (const facultyId of FACULTY_IDS) {\n        console.log(`\\nüè´ Processing Faculty ID: ${facultyId}`);\n        await page.goto(`https://is.mendelu.cz/auth/student/hodnoceni.pl?fakulta=${facultyId};lang=cz`);\n      \n      // If we see a \"Select Faculty\" list, we might need to handle it\n      if (await page.locator('div.vyber-fakult').count() > 0) {\n          console.log(`   [DEBUG] Found faculty selection div for ID ${facultyId}`);\n          const facultyLink = page.locator(`a[href*=\"fakulta=${facultyId}\"]`);\n          if (await facultyLink.count() > 0) {\n              await facultyLink.click();\n              await page.waitForLoadState('networkidle');\n          }\n      }\n\n      // Level 2: Semester Selection\n      // Locator: table#tmtab_1\n      const semesterTable = page.locator('table#tmtab_1');\n      if (await semesterTable.count() === 0) {\n        console.log(`   ‚ö†Ô∏è No table found for faculty ${facultyId}`);\n        const currentUrl = page.url();\n        console.log(`   [DEBUG] Current URL: ${currentUrl}`);\n        if (facultyId === FACULTY_IDS[0]) { // Only dump first failure to avoid log bloat\n            const content = await page.content();\n            console.log(`   [DEBUG] Page Content Snippet: ${content.substring(0, 1000)}`);\n        }\n        continue;\n      }\n\n      // Validation: Header must contain \"N√°zev obdob√≠\"\n      const semesterHeader = semesterTable.locator('tr.zahlavi th').filter({ hasText: 'N√°zev obdob√≠' });\n      if (await semesterHeader.count() === 0) {\n        console.log(`   ‚ö†Ô∏è Invalid table format (missing \"N√°zev obdob√≠\") for faculty ${facultyId}`);\n        continue;\n      }\n\n      // Iterate rows\n      const semesterRows = semesterTable.locator('tr.uis-hl-table');\n      const semesterCount = await semesterRows.count();\n      \n      // We need to collect links first to avoid stale element errors during navigation\n      const semesterLinks: { name: string, url: string }[] = [];\n\n      for (let i = 0; i < semesterCount; i++) {\n        const row = semesterRows.nth(i);\n        const cells = row.locator('td');\n        const cellCount = await cells.count();\n        \n        let name = '';\n        let url = '';\n\n        for (let c = 0; c < cellCount; c++) {\n            const text = await cells.nth(c).innerText();\n            if (!name && text.match(/\\d{4}\\/\\d{4}/)) {\n                name = text.trim();\n            }\n            const link = cells.nth(c).locator('a[href*=\"obdobi=\"]');\n            if (!url && await link.count() > 0) {\n                url = (await link.getAttribute('href')) || '';\n            }\n        }\n\n        if (name && url) {\n            // Just collect all valid semester links, we'll slice to MAX_SEMESTERS later\n            const absUrl = new URL(url, page.url()).toString();\n            semesterLinks.push({ name, url: absUrl });\n        }\n      }\n\n      // Limit to MAX_SEMESTERS\n      const limitedSemesterLinks = semesterLinks.slice(0, MAX_SEMESTERS);\n      console.log(`   Found ${semesterLinks.length} semesters, processing ${limitedSemesterLinks.length}.`);\n\n      // Process Semesters\n      for (const semester of limitedSemesterLinks) {\n        console.log(`   üìÖ Processing Semester: ${semester.name}`);\n        await page.goto(semester.url);\n\n        const courseTable = page.locator('table#tmtab_1');\n        if (await courseTable.count() === 0) continue;\n\n        const courseRows = courseTable.locator('tr.uis-hl-table');\n        const courseCount = await courseRows.count();\n        const courseLinks: { code: string, url: string }[] = [];\n\n        for (let j = 0; j < courseCount; j++) {\n            const row = courseRows.nth(j);\n            const cells = row.locator('td');\n            const cellCount = await cells.count();\n            \n            let code = '';\n            let url = '';\n\n            for (let c = 0; c < cellCount; c++) {\n                const text = (await cells.nth(c).innerText()).trim();\n                if (!code && TARGET_COURSES.includes(text)) {\n                    code = text;\n                }\n                const links = cells.nth(c).locator('a[href*=\"hodnoceni.pl\"][href*=\"predmet=\"][href*=\"obdobi=\"]');\n                if (await links.count() > 0) {\n                    url = (await links.first().getAttribute('href')) || '';\n                }\n            }\n\n            if (code && url) {\n                const absUrl = new URL(url, page.url()).toString();\n                courseLinks.push({ code, url: absUrl });\n            }\n        }\n\n        if (courseLinks.length > 0) {\n             console.log(`     Found ${courseLinks.length} target courses.`);\n        }\n\n        // Process Courses\n        for (const course of courseLinks) {\n            console.log(`     üìö Processing Course: ${course.code}`);\n            await page.goto(course.url); // Navigate to predmet={id}\n\n             // Level 4: Statistics Extraction\n             const statsTable = page.locator('table#tmtab_1');\n             if (await statsTable.count() === 0) {\n                 console.log(`       ‚ö†Ô∏è No stats table found (skipping).`);\n                 continue;\n             }\n\n             // Validation: Headers \"A\", \"B\", \"F\"\n             const headerRow = statsTable.locator('tr.zahlavi');\n             const hasA = await headerRow.locator('th, td', { hasText: 'A' }).count() > 0;\n             const hasF = await headerRow.locator('th, td', { hasText: 'F' }).count() > 0;\n             \n             if (!hasA || !hasF) {\n                 console.log('       ‚ö†Ô∏è Stats table validation failed (headers A/F missing).');\n                 try {\n                     const headerHtml = await headerRow.innerHTML();\n                     console.log(`       [DEBUG] Header HTML: ${headerHtml}`);\n                 } catch (e) {}\n                 continue;\n             }\n             // --- NEW LOGIC: Parse NVD3 Chart Script for \"V≈°echny term√≠ny\" ---\n             const pageSource = await page.content();\n             \n             // Regex to extract the \"V≈°echny term√≠ny\" chart data block\n             // It's the FIRST d3.select(#graph_X svg).datum([{values: [...]}]) block\n             const chartRegex = /d3\\.select\\('#graph_\\d+ svg'\\)\\s*\\.datum\\(\\[\\s*\\{\\s*values:\\s*\\[\\s*([\\s\\S]*?)\\]\\s*}\\s*,?\\s*\\]\\)/;\n             const match = pageSource.match(chartRegex);\n             \n             let totalPass = 0;\n             let totalFail = 0;\n             let uniqueStudents = 0;\n             const grades: any = { A: 0, B: 0, C: 0, D: 0, E: 0, F: 0, FN: 0 };\n             \n             if (match && match[1]) {\n                 // Parse the values array: { x: 'A', y: 10 }, ...\n                 const valuesStr = match[1];\n                 const valueRegex = /\\{\\s*x:\\s*['\"]([^'\"]+)['\"],\\s*y:\\s*(\\d+)\\s*}/g;\n                 let vm;\n                 while ((vm = valueRegex.exec(valuesStr)) !== null) {\n                     const grade = vm[1];\n                     const count = parseInt(vm[2], 10);\n                     if (grade === 'A') grades.A = count;\n                     else if (grade === 'B') grades.B = count;\n                     else if (grade === 'C') grades.C = count;\n                     else if (grade === 'D') grades.D = count;\n                     else if (grade === 'E') grades.E = count;\n                     else if (grade === 'F') grades.F = count;\n                     else if (grade === 'zk-nedost' || grade === 'FN' || grade.toLowerCase().includes('nedost')) grades.FN = count;\n                     // For \"zap/nezap\" style courses:\n                     else if (grade === 'zap') totalPass = count;\n                     else if (grade === 'nezap') totalFail += count;\n                     else if (grade === 'zap-nedost') grades.FN = count;\n                 }\n                 \n                 // Calculate pass/fail from ECTS grades if not \"zap/nezap\"\n                 if (totalPass === 0 && (grades.A + grades.B + grades.C + grades.D + grades.E) > 0) {\n                     totalPass = grades.A + grades.B + grades.C + grades.D + grades.E;\n                     totalFail = grades.F + grades.FN;\n                 } else if (totalPass > 0) {\n                     // \"zap/nezap\" style - already set\n                     totalFail += grades.FN;\n                 }\n                 \n                 uniqueStudents = totalPass + totalFail;\n                 console.log(`       üìä Final Outcome (Unique Students): Pass=${totalPass}, Fail=${totalFail}, N=${uniqueStudents}`);\n             } else {\n                 console.log(`       ‚ö†Ô∏è Could not find NVD3 chart data, skipping.`);\n                 continue;\n             }\n\n             results.push({\n                 facultyId,\n                 semester: semester.name,\n                 course: course.code,\n                 totalPass,\n                 totalFail,\n                 grades,\n                 sourceUrl: course.url,\n                 timestamp: new Date().toISOString()\n             });\n\n             // Save incrementally\n             const outputDir = path.join(__dirname, '..', 'test-results');\n             if (!fs.existsSync(outputDir)) {\n                 try { fs.mkdirSync(outputDir, { recursive: true }); } catch (e) {}\n             }\n             const outputPath = path.join(outputDir, 'student-data.json');\n             fs.writeFileSync(outputPath, JSON.stringify(results, null, 2));\n        }\n      }\n    }\n\n    // Save results\n    const outputDir = path.join(__dirname, '..', 'test-results');\n    if (!fs.existsSync(outputDir)) {\n        fs.mkdirSync(outputDir, { recursive: true });\n    }\n    const outputPath = path.join(outputDir, 'student-data.json');\n    fs.writeFileSync(outputPath, JSON.stringify(results, null, 2));\n    console.log(`\\nüíæ Saved ${results.length} records to ${outputPath}`);\n    \n    // Allow manual inspection if needed (optional, maybe remove for pure CI)\n    // await page.pause(); \n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/success-rate.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/visual/calendar.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/visual/exams.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/tests/visual/search.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/e2e/utils/id.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/CalendarEvent.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MapPin' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MapPin } from \"lucide-react\";\n\ninterface CalendarEventProps {\n  title: string;\n  startTime: string;\n  endTime: string;\n  style: {\n    top: string;\n    height: string;\n  };\n  organizer?: string;\n  tentative?: boolean;\n  type?: \"lecture\" | \"exercise\" | \"other\";\n  location?: string;\n}\n\nexport function CalendarEvent({\n  title,\n  startTime,\n  endTime,\n  style,\n  organizer,\n  tentative,\n  type = \"other\",\n  location,\n}: CalendarEventProps) {\n  // Calculate duration in minutes\n  const calculateDuration = () => {\n    const [startHours, startMinutes] = startTime.split(\":\").map(Number);\n    const [endHours, endMinutes] = endTime.split(\":\").map(Number);\n    const startTotalMinutes = startHours * 60 + startMinutes;\n    const endTotalMinutes = endHours * 60 + endMinutes;\n    return endTotalMinutes - startTotalMinutes;\n  };\n\n  const duration = calculateDuration();\n  const isLongEnough = duration >= 60; // Only show location if event is 1 hour or longer\n\n  // Determine colors based on type\n  const getColors = () => {\n    if (type === \"lecture\") {\n      // Green for lectures (p≈ô.)\n      return {\n        bg: \"rgba(165, 214, 167, 0.9)\",\n        border: \"rgba(165, 214, 167, 0.9)\",\n        leftBorder: \"rgba(76, 175, 80, 1)\",\n      };\n    } else if (type === \"exercise\") {\n      // Blue for exercises (cv.)\n      return {\n        bg: \"rgba(144, 202, 249, 0.9)\",\n        border: \"rgba(144, 202, 249, 0.9)\",\n        leftBorder: \"rgba(33, 150, 243, 1)\",\n      };\n    } else {\n      // Pink for other events\n      return {\n        bg: \"rgba(241, 183, 187, 0.9)\",\n        border: \"rgba(241, 183, 187, 0.9)\",\n        leftBorder: \"rgba(180, 100, 110, 1)\",\n      };\n    }\n  };\n\n  const colors = getColors();\n\n  // Split title into code and rest\n  const spaceIndex = title.indexOf(\" \");\n  const courseCode = spaceIndex > 0 ? title.substring(0, spaceIndex) : title;\n  const courseTitle = spaceIndex > 0 ? title.substring(spaceIndex + 1) : \"\";\n\n  return (\n    <div\n      className=\"absolute left-1 right-1 rounded overflow-hidden cursor-pointer\"\n      style={{\n        top: style.top,\n        height: style.height,\n        backgroundColor: colors.bg,\n        border: `1px solid ${colors.border}`,\n        borderLeft: tentative ? `4px dashed ${colors.leftBorder}` : `4px solid ${colors.leftBorder}`,\n      }}\n    >\n      <div className=\"p-1 h-full flex flex-col text-xs overflow-hidden\">\n        <div className=\"text-gray-900 flex-shrink-0\">\n          <div className=\"font-semibold\">{courseCode}</div>\n          {courseTitle && <div className=\"break-words line-clamp-2\">{courseTitle}</div>}\n        </div>\n        {organizer && (\n          <div className=\"text-gray-700 text-xs truncate flex-shrink-0\">{organizer}</div>\n        )}\n        {isLongEnough && location && (\n          <div className=\"text-gray-700 text-xs mt-auto flex-shrink-0\">\n            {location}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/CalendarView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/figma/ImageWithFallback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":46,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":46,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\";\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nexport { Badge, badgeVariants };\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":58,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":58,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9 rounded-md\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":160,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":160,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label@2.1.2\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form@7.55.0\";\n\nimport { cn } from \"./utils\";\nimport { Label } from \"./label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue,\n);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState } = useFormContext();\n  const formState = useFormState({ name: fieldContext.name });\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue,\n);\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId();\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  );\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField();\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  );\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } =\n    useFormField();\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  );\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { formDescriptionId } = useFormField();\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { error, formMessageId } = useFormField();\n  const body = error ? String(error?.message ?? \"\") : props.children;\n\n  if (!body) {\n    return null;\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  );\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n};\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":167,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":167,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu@1.2.5\";\nimport { cva } from \"class-variance-authority@0.7.1\";\nimport { ChevronDownIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction NavigationMenu({\n  className,\n  children,\n  viewport = true,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {\n  viewport?: boolean;\n}) {\n  return (\n    <NavigationMenuPrimitive.Root\n      data-slot=\"navigation-menu\"\n      data-viewport={viewport}\n      className={cn(\n        \"group/navigation-menu relative flex max-w-max flex-1 items-center justify-center\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      {viewport && <NavigationMenuViewport />}\n    </NavigationMenuPrimitive.Root>\n  );\n}\n\nfunction NavigationMenuList({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {\n  return (\n    <NavigationMenuPrimitive.List\n      data-slot=\"navigation-menu-list\"\n      className={cn(\n        \"group flex flex-1 list-none items-center justify-center gap-1\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction NavigationMenuItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {\n  return (\n    <NavigationMenuPrimitive.Item\n      data-slot=\"navigation-menu-item\"\n      className={cn(\"relative\", className)}\n      {...props}\n    />\n  );\n}\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1\",\n);\n\nfunction NavigationMenuTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {\n  return (\n    <NavigationMenuPrimitive.Trigger\n      data-slot=\"navigation-menu-trigger\"\n      className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n      {...props}\n    >\n      {children}{\" \"}\n      <ChevronDownIcon\n        className=\"relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180\"\n        aria-hidden=\"true\"\n      />\n    </NavigationMenuPrimitive.Trigger>\n  );\n}\n\nfunction NavigationMenuContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {\n  return (\n    <NavigationMenuPrimitive.Content\n      data-slot=\"navigation-menu-content\"\n      className={cn(\n        \"data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto\",\n        \"group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction NavigationMenuViewport({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {\n  return (\n    <div\n      className={cn(\n        \"absolute top-full left-0 isolate z-50 flex justify-center\",\n      )}\n    >\n      <NavigationMenuPrimitive.Viewport\n        data-slot=\"navigation-menu-viewport\"\n        className={cn(\n          \"origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]\",\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  );\n}\n\nfunction NavigationMenuLink({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {\n  return (\n    <NavigationMenuPrimitive.Link\n      data-slot=\"navigation-menu-link\"\n      className={cn(\n        \"data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction NavigationMenuIndicator({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {\n  return (\n    <NavigationMenuPrimitive.Indicator\n      data-slot=\"navigation-menu-indicator\"\n      className={cn(\n        \"data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden\",\n        className,\n      )}\n      {...props}\n    >\n      <div className=\"bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md\" />\n    </NavigationMenuPrimitive.Indicator>\n  );\n}\n\nexport {\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n  navigationMenuTriggerStyle,\n};\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/sidebar.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/root/reis/inspiration/calendar_view_reis/src/components/ui/sidebar.tsx:611:26\n  609 |   // Random width between 50 to 90%.\n  610 |   const width = React.useMemo(() => {\n> 611 |     return `${Math.floor(Math.random() * 40) + 50}%`;\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  612 |   }, []);\n  613 |\n  614 |   return (","line":611,"column":26,"nodeType":null,"endLine":611,"endColumn":39},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":725,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":725,"endColumn":13}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { VariantProps, cva } from \"class-variance-authority@0.7.1\";\nimport { PanelLeftIcon } from \"lucide-react@0.487.0\";\n\nimport { useIsMobile } from \"./use-mobile\";\nimport { cn } from \"./utils\";\nimport { Button } from \"./button\";\nimport { Input } from \"./input\";\nimport { Separator } from \"./separator\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"./sheet\";\nimport { Skeleton } from \"./skeleton\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"./tooltip\";\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\";\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEBAR_WIDTH = \"16rem\";\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidebar: () => void;\n};\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\n  }\n\n  return context;\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}) {\n  const isMobile = useIsMobile();\n  const [openMobile, setOpenMobile] = React.useState(false);\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen);\n  const open = openProp ?? _open;\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value;\n      if (setOpenProp) {\n        setOpenProp(openState);\n      } else {\n        _setOpen(openState);\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\n    },\n    [setOpenProp, open],\n  );\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\n  }, [isMobile, setOpen, setOpenMobile]);\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault();\n        toggleSidebar();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [toggleSidebar]);\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\";\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\n  );\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className,\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  );\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\";\n  variant?: \"sidebar\" | \"floating\" | \"inset\";\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\";\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon)\",\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar();\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"size-7\", className)}\n      onClick={(event) => {\n        onClick?.(event);\n        toggleSidebar();\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  );\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar();\n\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  );\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean;\n  isActive?: boolean;\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\";\n  const { isMobile, state } = useSidebar();\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  );\n\n  if (!tooltip) {\n    return button;\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    };\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  );\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean;\n  showOnHover?: boolean;\n}) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean;\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean;\n  size?: \"sm\" | \"md\";\n  isActive?: boolean;\n}) {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":47,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport * as React from \"react\";\nimport * as TogglePrimitive from \"@radix-ui/react-toggle@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction Toggle({\n  className,\n  variant,\n  size,\n  ...props\n}: React.ComponentProps<typeof TogglePrimitive.Root> &\n  VariantProps<typeof toggleVariants>) {\n  return (\n    <TogglePrimitive.Root\n      data-slot=\"toggle\"\n      className={cn(toggleVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Toggle, toggleVariants };\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/components/ui/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/inspiration/calendar_view_reis/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/scripts/crawl-success-rates.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'join' is defined but never used.","line":3,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'__dirname' is assigned a value but never used.","line":12,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":16},{"ruleId":"prefer-const","severity":2,"message":"'code' is never reassigned. Use 'const' instead.","line":135,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":135,"endColumn":21,"fix":{"range":[4969,5016],"text":"const code = cells[1]?.textContent?.trim() || '';"}},{"ruleId":"prefer-const","severity":2,"message":"'name' is never reassigned. Use 'const' instead.","line":136,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":136,"endColumn":21,"fix":{"range":[5029,5076],"text":"const name = cells[2]?.textContent?.trim() || '';"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6206,6209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6206,6209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7535,7538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7535,7538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":211,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8672,8675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8672,8675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":211,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8680,8683],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8680,8683],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":251,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":251,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10835,10838],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10835,10838],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":2,"fixableWarningCount":0,"source":"import { chromium } from '@playwright/test';\nimport { writeFile } from 'fs/promises';\nimport { dirname, join } from 'path';\nimport { fileURLToPath } from 'url';\nimport dotenv from 'dotenv';\nimport * as db from '../server/db';\n\n// Load environment variables\ndotenv.config();\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nconst BASE_URL = 'https://is.mendelu.cz';\nconst LOGIN_URL = `${BASE_URL}/system/login.pl`;\nconst STATS_URL = `${BASE_URL}/auth/student/hodnoceni.pl`;\n\n// Correct faculty IDs from spec\nconst FACULTIES = [\n  { id: '2', name: 'PEF' },\n  { id: '14', name: 'Agronomick√°' },\n  { id: '23', name: 'FRRMS' },\n  { id: '38', name: 'LDF' },\n  { id: '60', name: 'Zahradnick√°' },\n  { id: '220', name: 'ICV' },\n];\n\nconst MAX_HISTORY_YEARS = 15;\n\nasync function run() {\n  const args = process.argv.slice(2);\n  const facultyFilter = args.find(a => a.startsWith('--faculty='))?.split('=')[1];\n  const resume = args.includes('--resume');\n  const limitCount = args.find(a => a.startsWith('--limit='))?.split('=')[1];\n  const maxCourses = limitCount ? parseInt(limitCount, 10) : Infinity;\n\n  console.log('üöÄ Starting Success Rate Crawler...');\n  if (facultyFilter) console.log(`üéØ Filtering by faculty: ${facultyFilter}`);\n  if (resume) console.log('‚ôªÔ∏è  Resume mode enabled');\n  \n  const browser = await chromium.launch({ headless: true });\n  const context = await browser.newContext();\n  const page = await context.newPage();\n\n  let scrapedTotal = 0;\n\n  try {\n    // 1. Login\n    console.log('üîë Logging in...');\n    await page.goto(LOGIN_URL);\n    await page.fill('input[name=\"credential_0\"]', process.env.MENDELU_USER || '');\n    await page.fill('input[name=\"credential_1\"]', process.env.MENDELU_PASS || '');\n    await page.click('input[type=\"submit\"], button[type=\"submit\"]');\n    await page.waitForLoadState('networkidle');\n    console.log('‚úÖ Logged in successfully');\n\n    const currentYear = new Date().getFullYear();\n\n    // 2. Iterate Faculties\n    for (const faculty of FACULTIES) {\n      if (facultyFilter && faculty.name !== facultyFilter && faculty.id !== facultyFilter) continue;\n\n      console.log(`\\nüè¢ Processing Faculty: ${faculty.name} (${faculty.id})`);\n      db.upsertFaculty(parseInt(faculty.id, 10), faculty.name);\n      \n      await page.goto(`${STATS_URL}?fakulta=${faculty.id};lang=cz`);\n      await page.waitForLoadState('networkidle');\n\n      // Level 2: Find semesters\n      const semesterLinks = await page.evaluate(() => {\n        const table = document.querySelector('table#tmtab_1');\n        if (!table) return [];\n        \n        const results: { name: string; url: string; id: string; year: number }[] = [];\n        const rows = table.querySelectorAll('tr.uis-hl-table');\n        \n        rows.forEach(row => {\n          const cells = row.querySelectorAll('td');\n          if (cells.length < 5) return;\n          \n          const nameCell = cells[1];\n          const linkCell = cells[4];\n          \n          const name = nameCell?.textContent?.trim() || '';\n          const link = linkCell?.querySelector('a');\n          const href = link?.getAttribute('href') || '';\n          \n          const yearMatch = name.match(/(\\d{4})\\/\\d{4}/);\n          const idMatch = href.match(/obdobi=(\\d+)/);\n          \n          if (yearMatch && idMatch) {\n            results.push({\n              name,\n              url: href,\n              id: idMatch[1],\n              year: parseInt(yearMatch[1], 10)\n            });\n          }\n        });\n        return results;\n      });\n\n      const validSemesters = semesterLinks.filter(s => s.year >= currentYear - MAX_HISTORY_YEARS);\n      console.log(`üìÖ Found ${validSemesters.length} relevant semesters`);\n\n      for (const sem of validSemesters) {\n        console.log(`  üîç Processing Semester: ${sem.name}`);\n        const semesterId = parseInt(sem.id, 10);\n        db.upsertSemester(semesterId, parseInt(faculty.id, 10), sem.name, sem.year);\n\n        const fullUrl = sem.url.startsWith('http') \n          ? sem.url \n          : `${BASE_URL}/auth/student/${sem.url}`;\n        await page.goto(fullUrl);\n        await page.waitForLoadState('networkidle');\n\n        // DEBUG: Save first semester HTML for analysis\n        if (sem === validSemesters[0]) {\n          const semHtml = await page.content();\n          await writeFile(`debug-semester-${faculty.id}.html`, semHtml);\n          console.log(`    üì∏ Saved debug-semester-${faculty.id}.html`);\n        }\n\n        // Level 3: Find courses\n        const courses = await page.evaluate(() => {\n          const table = document.querySelector('table#tmtab_1');\n          if (!table) return [];\n          const results: { code: string; name: string; predmetId: string }[] = [];\n          const rows = table.querySelectorAll('tr.uis-hl-table');\n          \n          rows.forEach(row => {\n            const cells = row.querySelectorAll('td');\n            if (cells.length < 3) return;\n            \n            let code = cells[1]?.textContent?.trim() || '';\n            let name = cells[2]?.textContent?.trim() || '';\n            let predmetId = '';\n            \n            const link = row.querySelector('a[href*=\"predmet=\"]');\n            if (link) {\n              const href = link.getAttribute('href') || '';\n              const idMatch = href.match(/predmet=(\\d+)/);\n              if (idMatch) predmetId = idMatch[1];\n            }\n            \n            if (code && predmetId) {\n              results.push({ code, name, predmetId });\n            }\n          });\n          return results;\n        });\n\n        console.log(`    üìö Found ${courses.length} courses in semester`);\n\n        for (const course of courses) {\n          if (scrapedTotal >= maxCourses) break;\n\n          // Check if already scraped in resume mode\n          const courseId = db.upsertCourse(course.code, course.name, course.predmetId);\n          \n          if (resume) {\n             // Basic resume logic: if we already have stats for this course in this semester, skip\n             // A more advanced one would check last_scraped timestamp\n             const existing = db.getSuccessRatesByCourse(course.code);\n             if (existing && existing.stats.some((s: any) => s.semesterName === sem.name)) {\n                // console.log(`      ‚è≠Ô∏è  Skipping ${course.code} (already in DB)`);\n                continue;\n             }\n          }\n\n          try {\n            const statsUrl = `${STATS_URL}?fakulta=${faculty.id};obdobi=${sem.id};predmet=${course.predmetId};lang=cz`;\n            await page.goto(statsUrl, { waitUntil: 'domcontentloaded' });\n\n            const pageHtml = await page.content();\n            const tableMatch = pageHtml.match(/<table[^>]*id=\"tmtab_1\"[^>]*>[\\s\\S]*?<\\/table>/);\n            const tableHtml = tableMatch ? tableMatch[0] : null;\n\n            if (!tableHtml) continue;\n\n            const cleanHtml = tableHtml.replace(/\\s+/g, ' ');\n            if (!cleanHtml.includes('>A<') || !cleanHtml.includes('>B<') || !cleanHtml.includes('>F<')) {\n               continue;\n            }\n\n            // Use NVD3 chart parsing for aggregate \"V≈°echny term√≠ny\" (Final Outcome)\n            const chartRegex = /d3\\.select\\('#graph_\\d+ svg'\\)\\s*\\.datum\\(\\[\\s*\\{\\s*values:\\s*\\[\\s*([\\s\\S]*?)\\]\\s*}\\s*,?\\s*\\]\\)/;\n            const match = pageHtml.match(chartRegex);\n            \n            if (match && match[1]) {\n                const valuesStr = match[1];\n                const valueRegex = /\\{\\s*x:\\s*['\"]([^'\"]+)['\"],\\s*y:\\s*(\\d+)\\s*}/g;\n                const grades: any = { A: 0, B: 0, C: 0, D: 0, E: 0, F: 0, FN: 0 };\n                let vm;\n                while ((vm = valueRegex.exec(valuesStr)) !== null) {\n                    const grade = vm[1];\n                    const count = parseInt(vm[2], 10);\n                    if (grade === 'A') grades.A = count;\n                    else if (grade === 'B') grades.B = count;\n                    else if (grade === 'C') grades.C = count;\n                    else if (grade === 'D') grades.D = count;\n                    else if (grade === 'E') grades.E = count;\n                    else if (grade === 'F') grades.F = count;\n                    else if (grade === 'zk-nedost' || grade === 'FN' || grade.toLowerCase().includes('nedost')) grades.FN = count;\n                    else if (grade === 'zap-nedost') grades.FN = count;\n                }\n\n                // Insert as a single \"V≈°echny term√≠ny\" record (Final Outcome)\n                db.insertSuccessRate(courseId, semesterId, 'V≈°echny term√≠ny', grades, statsUrl);\n                scrapedTotal++;\n                console.log(`      ‚úÖ Scraped ${course.code} (N=${Object.values(grades).reduce((a: any, b: any) => a + b, 0)}) [${scrapedTotal}/${maxCourses > 10000 ? '?' : maxCourses}]`);\n                db.markCourseScraped(course.code);\n            } else {\n                // Fallback to table parsing if chart not found (older IS pages or different layout)\n                const rowMatches = cleanHtml.match(/<tr class=\"[^\"]*uis-hl-table[^\"]*\">(.*?)<\\/tr>/g);\n                if (rowMatches) {\n                    let courseHasStats = false;\n                    for (const rowHtml of rowMatches) {\n                        const cells = rowHtml.match(/<td[^>]*>(.*?)<\\/td>/g);\n                        if (!cells || cells.length < 9) continue;\n                        \n                        const getCellText = (cell: string) => cell.replace(/<[^>]*>/g, '').trim();\n                        const getCellVal = (cell: string) => {\n                            const val = parseInt(getCellText(cell) || '0', 10);\n                            return isNaN(val) ? 0 : val;\n                        };\n\n                        const termName = getCellText(cells[1]);\n                        const grades = {\n                            A: getCellVal(cells[2]),\n                            B: getCellVal(cells[3]),\n                            C: getCellVal(cells[4]),\n                            D: getCellVal(cells[5]),\n                            E: getCellVal(cells[6]),\n                            F: getCellVal(cells[7]),\n                            FN: getCellVal(cells[8])\n                        };\n\n                        if (grades.A || grades.B || grades.C || grades.D || grades.E || grades.F || grades.FN) {\n                            db.insertSuccessRate(courseId, semesterId, termName, grades, statsUrl);\n                            courseHasStats = true;\n                        }\n                    }\n                    if (courseHasStats) {\n                        scrapedTotal++;\n                        console.log(`      ‚úÖ Scraped ${course.code} [${scrapedTotal}/${maxCourses > 10000 ? '?' : maxCourses}]`);\n                        db.markCourseScraped(course.code);\n                    }\n                }\n            }\n          } catch (e: any) {\n            console.error(`      ‚ùå Error processing course ${course.code}:`, e.message);\n          }\n        }\n        db.markSemesterScraped(semesterId);\n        if (scrapedTotal >= maxCourses) break;\n      }\n      if (scrapedTotal >= maxCourses) break;\n    }\n\n    console.log(`\\n‚ú® Finished! Total courses scraped/updated: ${scrapedTotal}`);\n\n  } catch (error) {\n    console.error('üí• Fatal error:', error);\n  } finally {\n    db.closeDb();\n    await browser.close();\n  }\n}\n\nrun();\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/check_db.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[544,547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[544,547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport Database from 'better-sqlite3';\nimport path from 'path';\n\nconst dbPath = './server/db/success-rates.db';\nconst db = new Database(dbPath);\n\nconsole.log('--- DATABASE CHECK ---');\nconsole.log('DB Path:', path.resolve(dbPath));\n\nconst course = db.prepare(`SELECT id FROM courses WHERE code = 'EBC-ALG'`).get() as { id: number };\nif (!course) {\n    console.log('Course EBC-ALG not found');\n} else {\n    console.log('Course ID:', course.id);\n    const semesters = db.prepare(`SELECT * FROM semesters WHERE name LIKE '%2024/2025%'`).all() as any[];\n    console.log('Semesters found:', semesters.length);\n    for (const sem of semesters) {\n        console.log(`\\nSemester: ${sem.name} (ID: ${sem.id})`);\n        const stats = db.prepare(`SELECT term_name, grade_f, grade_fn, source_url FROM success_rates WHERE course_id = ? AND semester_id = ?`).all(course.id, sem.id);\n        if (stats.length === 0) {\n            console.log('  No stats found for this semester');\n        } else {\n            console.table(stats);\n        }\n    }\n}\n\ndb.close();\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/db/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":104,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3466,3469],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3466,3469],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4033,4036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4033,4036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4071,4074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4071,4074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5573,5576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5573,5576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Database from 'better-sqlite3';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst DB_PATH = path.join(__dirname, 'success-rates.db');\nconst SCHEMA_PATH = path.join(__dirname, 'schema.sql');\n\nlet db: Database.Database | null = null;\n\nexport function getDb(): Database.Database {\n  if (!db) {\n    db = new Database(DB_PATH);\n    db.pragma('journal_mode = WAL');\n    \n    // Initialize schema\n    const schema = fs.readFileSync(SCHEMA_PATH, 'utf-8');\n    db.exec(schema);\n    \n    console.log('üì¶ Database initialized at', DB_PATH);\n  }\n  return db;\n}\n\nexport function closeDb(): void {\n  if (db) {\n    db.close();\n    db = null;\n  }\n}\n\n// Helper functions for common operations\nexport function upsertFaculty(id: number, name: string): void {\n  const db = getDb();\n  db.prepare(`\n    INSERT INTO faculties (id, name) VALUES (?, ?)\n    ON CONFLICT(id) DO UPDATE SET name = excluded.name\n  `).run(id, name);\n}\n\nexport function upsertSemester(id: number, facultyId: number, name: string, year: number): void {\n  const db = getDb();\n  db.prepare(`\n    INSERT INTO semesters (id, faculty_id, name, year) VALUES (?, ?, ?, ?)\n    ON CONFLICT(id) DO UPDATE SET name = excluded.name, year = excluded.year\n  `).run(id, facultyId, name, year);\n}\n\nexport function upsertCourse(code: string, name: string, predmetId: string): number {\n  const db = getDb();\n  db.prepare(`\n    INSERT INTO courses (code, name, predmet_id) VALUES (?, ?, ?)\n    ON CONFLICT(code) DO UPDATE SET name = excluded.name, predmet_id = excluded.predmet_id\n  `).run(code, name, predmetId);\n  \n  const row = db.prepare('SELECT id FROM courses WHERE code = ?').get(code) as { id: number };\n  return row.id;\n}\n\nexport function insertSuccessRate(\n  courseId: number,\n  semesterId: number,\n  termName: string,\n  grades: { A: number; B: number; C: number; D: number; E: number; F: number; FN: number },\n  sourceUrl?: string\n): void {\n  const db = getDb();\n  \n  // Delete existing entry for this course-semester-term to avoid duplicates\n  db.prepare(`\n    DELETE FROM success_rates \n    WHERE course_id = ? AND semester_id = ? AND term_name = ?\n  `).run(courseId, semesterId, termName);\n  \n  db.prepare(`\n    INSERT INTO success_rates (course_id, semester_id, term_name, grade_a, grade_b, grade_c, grade_d, grade_e, grade_f, grade_fn, source_url)\n    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n  `).run(courseId, semesterId, termName, grades.A, grades.B, grades.C, grades.D, grades.E, grades.F, grades.FN, sourceUrl || null);\n}\n\nexport function markCourseScraped(code: string): void {\n  const db = getDb();\n  db.prepare(`UPDATE courses SET last_scraped = datetime('now') WHERE code = ?`).run(code);\n}\n\nexport function markSemesterScraped(id: number): void {\n  const db = getDb();\n  db.prepare(`UPDATE semesters SET last_scraped = datetime('now') WHERE id = ?`).run(id);\n}\n\nexport function getUnscrapedCourses(semesterId: number): Array<{ id: number; code: string; predmetId: string }> {\n  const db = getDb();\n  return db.prepare(`\n    SELECT c.id, c.code, c.predmet_id as predmetId\n    FROM courses c\n    WHERE c.last_scraped IS NULL\n    OR c.id NOT IN (SELECT DISTINCT course_id FROM success_rates WHERE semester_id = ?)\n  `).all(semesterId) as Array<{ id: number; code: string; predmetId: string }>;\n}\n\nexport function getSuccessRatesByCourse(courseCode: string): any {\n  const db = getDb();\n  \n  const rates = db.prepare(`\n    SELECT \n      sr.term_name,\n      sr.grade_a, sr.grade_b, sr.grade_c, sr.grade_d, sr.grade_e, sr.grade_f, sr.grade_fn,\n      sr.source_url,\n      s.name as semester_name, s.year,\n      c.code as course_code\n    FROM success_rates sr\n    JOIN courses c ON sr.course_id = c.id\n    JOIN semesters s ON sr.semester_id = s.id\n    WHERE c.code = ?\n    ORDER BY s.year DESC, sr.term_name\n  `).all(courseCode);\n  \n  if (rates.length === 0) return null;\n  \n  // Group by semester\n  const grouped: Record<string, any> = {};\n  for (const r of rates as any[]) {\n    const key = r.semester_name;\n    const isAggregate = r.term_name === 'V≈°echny term√≠ny';\n    \n    if (!grouped[key]) {\n      grouped[key] = {\n        semesterName: r.semester_name,\n        semesterId: key,\n        year: r.year,\n        sourceUrl: null,\n        totalPass: 0,\n        totalFail: 0,\n        terms: [],\n        hasAggregate: false\n      };\n    }\n    \n    // Always take sourceUrl if available in any row\n    if (r.source_url && !grouped[key].sourceUrl) {\n      grouped[key].sourceUrl = r.source_url;\n    }\n    \n    const pass = r.grade_a + r.grade_b + r.grade_c + r.grade_d + r.grade_e;\n    const fail = r.grade_f + r.grade_fn;\n    \n    if (isAggregate) {\n      // Aggregate row sets the exact counts, overriding any partial sums\n      grouped[key].totalPass = pass;\n      grouped[key].totalFail = fail;\n      grouped[key].hasAggregate = true;\n      // Aggregate row definitely has the correct URL\n      if (r.source_url) grouped[key].sourceUrl = r.source_url;\n    } else if (!grouped[key].hasAggregate) {\n      // Only sum if we haven't encountered the aggregate \"Final Outcome\" yet\n      grouped[key].totalPass += pass;\n      grouped[key].totalFail += fail;\n    }\n\n    grouped[key].terms.push({\n      term: r.term_name,\n      grades: { A: r.grade_a, B: r.grade_b, C: r.grade_c, D: r.grade_d, E: r.grade_e, F: r.grade_f, FN: r.grade_fn },\n      pass,\n      fail\n    });\n  }\n  \n  // Clean up internal flags before returning\n  const resultStats = Object.values(grouped).map((s: any) => {\n    delete s.hasAggregate;\n    return s;\n  });\n  \n  return {\n    courseCode,\n    stats: resultStats,\n    lastUpdated: new Date().toISOString()\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/db.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/db/index.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[974,977],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[974,977],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Database from 'better-sqlite3';\nexport declare function getDb(): Database.Database;\nexport declare function closeDb(): void;\nexport declare function upsertFaculty(id: number, name: string): void;\nexport declare function upsertSemester(id: number, facultyId: number, name: string, year: number): void;\nexport declare function upsertCourse(code: string, name: string, predmetId: string): number;\nexport declare function insertSuccessRate(courseId: number, semesterId: number, termName: string, grades: {\n    A: number;\n    B: number;\n    C: number;\n    D: number;\n    E: number;\n    F: number;\n    FN: number;\n}, sourceUrl?: string): void;\nexport declare function markCourseScraped(code: string): void;\nexport declare function markSemesterScraped(id: number): void;\nexport declare function getUnscrapedCourses(semesterId: number): Array<{\n    id: number;\n    code: string;\n    predmetId: string;\n}>;\nexport declare function getSuccessRatesByCourse(courseCode: string): any;\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/db/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/index.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/middleware/auth.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/middleware/auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/notifications.test.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/notifications.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/routes/auth.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/routes/auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/routes/notifications.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/routes/notifications.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/routes/success-rates.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/routes/success-rates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/seed.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/seed.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/db.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/db.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/index.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/middleware/auth.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/middleware/auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/notifications.test.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/notifications.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/routes/auth.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/routes/auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/routes/notifications.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/routes/notifications.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/routes/success-rates.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/routes/success-rates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/seed.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/seed.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/types.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/src/types.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/types.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/dist/types.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/ecosystem.config.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/db.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/middleware/auth.ts","messages":[{"ruleId":"@typescript-eslint/no-namespace","severity":2,"message":"ES2015 module syntax is preferred over namespaces.","line":13,"column":3,"nodeType":"TSModuleDeclaration","messageId":"moduleSyntaxIsPreferred","endLine":17,"endColumn":4},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":37,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * JWT Authentication Middleware\n */\n\nimport { Request, Response, NextFunction } from 'express';\nimport jwt from 'jsonwebtoken';\nimport type { JwtPayload } from '../types.js';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'development-secret-change-me';\n\n// Extend Express Request to include admin info\ndeclare global {\n  namespace Express {\n    interface Request {\n      admin?: JwtPayload;\n    }\n  }\n}\n\n/**\n * Middleware to verify JWT token\n */\nexport function requireAuth(req: Request, res: Response, next: NextFunction): void {\n  const authHeader = req.headers.authorization;\n  \n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    res.status(401).json({ error: 'Missing or invalid authorization header' });\n    return;\n  }\n\n  const token = authHeader.slice(7);\n\n  try {\n    const payload = jwt.verify(token, JWT_SECRET) as JwtPayload;\n    req.admin = payload;\n    next();\n  } catch (error) {\n    res.status(401).json({ error: 'Invalid or expired token' });\n  }\n}\n\n/**\n * Middleware to require superadmin access\n */\nexport function requireSuperadmin(req: Request, res: Response, next: NextFunction): void {\n  if (!req.admin?.isSuperadmin) {\n    res.status(403).json({ error: 'Superadmin access required' });\n    return;\n  }\n  next();\n}\n\n/**\n * Generate JWT token for admin\n */\nexport function generateToken(payload: JwtPayload): string {\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: '7d' });\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/notifications.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/routes/auth.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Admin' is defined but never used.","line":10,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Authentication Routes\n * POST /api/auth/login\n */\n\nimport { Router } from 'express';\nimport bcrypt from 'bcrypt';\nimport db from '../db.js';\nimport { generateToken } from '../middleware/auth.js';\nimport type { Admin, LoginInput } from '../types.js';\n\nconst router = Router();\n\n/**\n * POST /api/auth/login\n * Authenticates admin and returns JWT\n */\nrouter.post('/login', async (req, res) => {\n  try {\n    const { username, password } = req.body as LoginInput;\n\n    if (!username || !password) {\n      res.status(400).json({ error: 'Username and password required' });\n      return;\n    }\n\n    // Find admin by username\n    const stmt = db.prepare('SELECT * FROM admins WHERE username = ?');\n    const row = stmt.get(username) as {\n      id: string;\n      username: string;\n      password_hash: string;\n      association_id: string;\n      is_superadmin: number;\n    } | undefined;\n\n    if (!row) {\n      res.status(401).json({ error: 'Invalid credentials' });\n      return;\n    }\n\n    // Verify password\n    const validPassword = await bcrypt.compare(password, row.password_hash);\n    if (!validPassword) {\n      res.status(401).json({ error: 'Invalid credentials' });\n      return;\n    }\n\n    // Generate token\n    const token = generateToken({\n      adminId: row.id,\n      associationId: row.association_id,\n      isSuperadmin: row.is_superadmin === 1,\n    });\n\n    console.log(`[Auth] Admin ${username} logged in`);\n\n    res.json({\n      token,\n      admin: {\n        id: row.id,\n        username: row.username,\n        associationId: row.association_id,\n        isSuperadmin: row.is_superadmin === 1,\n      },\n    });\n  } catch (error) {\n    console.error('[Auth] Login error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\nexport default router;\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/routes/notifications.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Notification' is defined but never used.","line":18,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1493,1496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1493,1496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4963,4966],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4963,4966],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":322,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":322,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10158,10161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10158,10161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Notifications Routes\n * GET /api/notifications - Public, returns approved non-expired notifications\n * POST /api/notifications - Auth required, creates pending notification\n * GET /api/notifications/pending - Superadmin only, lists pending approvals\n * POST /api/notifications/:id/approve - Superadmin only\n * POST /api/notifications/:id/reject - Superadmin only\n * DELETE /api/notifications/:id - Auth required, delete own or any (superadmin)\n * POST /api/notifications/:id/view - Public, tracks view\n * POST /api/notifications/:id/click - Public, tracks click\n * GET /api/stats/:associationId - Auth required, own stats\n */\n\nimport { Router } from 'express';\nimport { v4 as uuidv4 } from 'uuid';\nimport db from '../db.js';\nimport { requireAuth, requireSuperadmin } from '../middleware/auth.js';\nimport type { CreateNotificationInput, Notification } from '../types.js';\n\nconst router = Router();\n\n// Rate limit: 1 notification per 7 days\nconst RATE_LIMIT_DAYS = 7;\n\n/**\n * GET /api/notifications\n * Public - Returns approved, non-expired notifications\n */\nrouter.get('/', (req, res) => {\n  try {\n    const now = new Date().toISOString();\n    const stmt = db.prepare(`\n      SELECT id, association_id, title, body, link, priority, created_at, expires_at\n      FROM notifications\n      WHERE status = 'approved' AND expires_at > ?\n      ORDER BY created_at DESC\n    `);\n    const rows = stmt.all(now);\n\n    // Transform to camelCase for frontend\n    const notifications = rows.map((row: any) => ({\n      id: row.id,\n      associationId: row.association_id,\n      title: row.title,\n      body: row.body,\n      link: row.link,\n      priority: row.priority,\n      createdAt: row.created_at,\n      expiresAt: row.expires_at,\n    }));\n\n    res.json(notifications);\n  } catch (error) {\n    console.error('[Notifications] GET error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * POST /api/notifications\n * Auth required - Creates notification with pending status\n * Rate limited: 1 per 14 days\n */\nrouter.post('/', requireAuth, (req, res) => {\n  try {\n    const admin = req.admin!;\n    const input = req.body as CreateNotificationInput;\n\n    // Validate input\n    if (!input.title || !input.body || !input.expiresAt) {\n      res.status(400).json({ error: 'Title, body, and expiresAt are required' });\n      return;\n    }\n\n    if (input.title.length > 100) {\n      res.status(400).json({ error: 'Title must be 100 characters or less' });\n      return;\n    }\n\n    if (input.body.length > 500) {\n      res.status(400).json({ error: 'Body must be 500 characters or less' });\n      return;\n    }\n\n    // Check rate limit (skip for superadmin)\n    if (!admin.isSuperadmin) {\n      const adminStmt = db.prepare('SELECT last_notification_at FROM admins WHERE id = ?');\n      const adminRow = adminStmt.get(admin.adminId) as { last_notification_at: string | null };\n\n      if (adminRow?.last_notification_at) {\n        const lastDate = new Date(adminRow.last_notification_at);\n        const daysSince = (Date.now() - lastDate.getTime()) / (1000 * 60 * 60 * 24);\n\n        if (daysSince < RATE_LIMIT_DAYS) {\n          const daysRemaining = Math.ceil(RATE_LIMIT_DAYS - daysSince);\n          res.status(429).json({\n            error: `Rate limit: You can post again in ${daysRemaining} days`,\n            nextAllowedAt: new Date(lastDate.getTime() + RATE_LIMIT_DAYS * 24 * 60 * 60 * 1000).toISOString(),\n          });\n          return;\n        }\n      }\n    }\n\n    // Create notification\n    const id = uuidv4();\n    const now = new Date().toISOString();\n\n    const insertStmt = db.prepare(`\n      INSERT INTO notifications (id, association_id, title, body, link, priority, status, created_at, expires_at, approved_at)\n      VALUES (?, ?, ?, ?, ?, ?, 'approved', ?, ?, ?)\n    `);\n    insertStmt.run(\n      id,\n      admin.associationId,\n      input.title,\n      input.body,\n      input.link || null,\n      input.priority || 'normal',\n      now,\n      input.expiresAt,\n      now // approved_at = now (auto-approved)\n    );\n\n    // Update last notification timestamp\n    const updateAdminStmt = db.prepare('UPDATE admins SET last_notification_at = ? WHERE id = ?');\n    updateAdminStmt.run(now, admin.adminId);\n\n    console.log(`[Notifications] Published notification ${id} by ${admin.associationId}`);\n\n    res.status(201).json({\n      id,\n      status: 'approved',\n      message: 'Notifikace byla publikov√°na!',\n    });\n  } catch (error) {\n    console.error('[Notifications] POST error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * GET /api/notifications/pending\n * Superadmin only - Lists all pending notifications\n */\nrouter.get('/pending', requireAuth, requireSuperadmin, (req, res) => {\n  try {\n    const stmt = db.prepare(`\n      SELECT * FROM notifications WHERE status = 'pending' ORDER BY created_at DESC\n    `);\n    const rows = stmt.all();\n\n    const notifications = rows.map((row: any) => ({\n      id: row.id,\n      associationId: row.association_id,\n      title: row.title,\n      body: row.body,\n      link: row.link,\n      priority: row.priority,\n      status: row.status,\n      createdAt: row.created_at,\n      expiresAt: row.expires_at,\n    }));\n\n    res.json(notifications);\n  } catch (error) {\n    console.error('[Notifications] GET pending error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * POST /api/notifications/:id/approve\n * Superadmin only - Approves a pending notification\n */\nrouter.post('/:id/approve', requireAuth, requireSuperadmin, (req, res) => {\n  try {\n    const { id } = req.params;\n    const now = new Date().toISOString();\n\n    const stmt = db.prepare(`\n      UPDATE notifications SET status = 'approved', approved_at = ? WHERE id = ? AND status = 'pending'\n    `);\n    const result = stmt.run(now, id);\n\n    if (result.changes === 0) {\n      res.status(404).json({ error: 'Notification not found or already processed' });\n      return;\n    }\n\n    console.log(`[Notifications] Approved notification ${id}`);\n    res.json({ success: true, status: 'approved' });\n  } catch (error) {\n    console.error('[Notifications] Approve error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * POST /api/notifications/:id/reject\n * Superadmin only - Rejects a pending notification\n */\nrouter.post('/:id/reject', requireAuth, requireSuperadmin, (req, res) => {\n  try {\n    const { id } = req.params;\n\n    const stmt = db.prepare(`\n      UPDATE notifications SET status = 'rejected' WHERE id = ? AND status = 'pending'\n    `);\n    const result = stmt.run(id);\n\n    if (result.changes === 0) {\n      res.status(404).json({ error: 'Notification not found or already processed' });\n      return;\n    }\n\n    console.log(`[Notifications] Rejected notification ${id}`);\n    res.json({ success: true, status: 'rejected' });\n  } catch (error) {\n    console.error('[Notifications] Reject error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * DELETE /api/notifications/:id\n * Auth required - Superadmin can delete any, others can delete only their own\n */\nrouter.delete('/:id', requireAuth, (req, res) => {\n  try {\n    const { id } = req.params;\n    const admin = req.admin!;\n\n    // First check if notification exists\n    const checkStmt = db.prepare('SELECT association_id FROM notifications WHERE id = ?');\n    const notification = checkStmt.get(id) as { association_id: string } | undefined;\n\n    if (!notification) {\n      res.status(404).json({ error: 'Notification not found' });\n      return;\n    }\n\n    // Check permission: superadmin can delete any, others only their own\n    if (!admin.isSuperadmin && notification.association_id !== admin.associationId) {\n      res.status(403).json({ error: 'Cannot delete notifications from other associations' });\n      return;\n    }\n\n    const deleteStmt = db.prepare('DELETE FROM notifications WHERE id = ?');\n    deleteStmt.run(id);\n\n    console.log(`[Notifications] Deleted notification ${id} by ${admin.associationId}`);\n    res.json({ success: true });\n  } catch (error) {\n    console.error('[Notifications] Delete error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * POST /api/notifications/:id/view\n * Public - Increments view count\n */\nrouter.post('/:id/view', (req, res) => {\n  try {\n    const { id } = req.params;\n\n    const stmt = db.prepare('UPDATE notifications SET view_count = view_count + 1 WHERE id = ?');\n    stmt.run(id);\n\n    res.json({ success: true });\n  } catch (error) {\n    console.error('[Notifications] View tracking error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * POST /api/notifications/:id/click\n * Public - Increments click count\n */\nrouter.post('/:id/click', (req, res) => {\n  try {\n    const { id } = req.params;\n\n    const stmt = db.prepare('UPDATE notifications SET click_count = click_count + 1 WHERE id = ?');\n    stmt.run(id);\n\n    res.json({ success: true });\n  } catch (error) {\n    console.error('[Notifications] Click tracking error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\n/**\n * GET /api/stats/:associationId\n * Auth required - Get stats for own association\n */\nrouter.get('/stats/:associationId', requireAuth, (req, res) => {\n  try {\n    const { associationId } = req.params;\n    const admin = req.admin!;\n\n    // Only allow viewing own stats (or superadmin can view all)\n    if (admin.associationId !== associationId && !admin.isSuperadmin) {\n      res.status(403).json({ error: 'Cannot view stats for other associations' });\n      return;\n    }\n\n    const stmt = db.prepare(`\n      SELECT \n        COUNT(*) as total,\n        SUM(CASE WHEN status = 'approved' THEN 1 ELSE 0 END) as approved,\n        SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) as pending,\n        SUM(CASE WHEN status = 'rejected' THEN 1 ELSE 0 END) as rejected,\n        SUM(view_count) as total_views,\n        SUM(click_count) as total_clicks\n      FROM notifications\n      WHERE association_id = ?\n    `);\n    const stats = stmt.get(associationId) as any;\n\n    res.json({\n      associationId,\n      total: stats.total || 0,\n      approved: stats.approved || 0,\n      pending: stats.pending || 0,\n      rejected: stats.rejected || 0,\n      totalViews: stats.total_views || 0,\n      totalClicks: stats.total_clicks || 0,\n    });\n  } catch (error) {\n    console.error('[Notifications] Stats error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\nexport default router;\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/routes/success-rates.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[315,318],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[315,318],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Success Rates API\n * \n * GET /api/success-rates?codes=EBC-ALG,EBC-MAT\n * Returns filtered success rate data for requested course codes\n */\n\nimport { Router } from 'express';\nimport * as db from '../../db/index.js';\n\nconst router = Router();\n\ninterface SubjectSuccessRate {\n    courseCode: string;\n    stats: any[];\n    lastUpdated: string;\n}\n\n/**\n * GET /api/success-rates?codes=EBC-ALG,EBC-MAT\n */\nrouter.get('/', (req, res) => {\n    const codesParam = req.query.codes as string;\n    \n    if (!codesParam) {\n        return res.status(400).json({ \n            error: 'Missing required parameter: codes',\n            example: '/api/success-rates?codes=EBC-ALG,EBC-MAT'\n        });\n    }\n    \n    const codes = codesParam.split(',').map(c => c.trim().toUpperCase());\n    \n    // Filter to requested codes\n    const result: Record<string, SubjectSuccessRate> = {};\n    let latestUpdate = '';\n\n    for (const code of codes) {\n        const data = db.getSuccessRatesByCourse(code);\n        if (data) {\n            result[code] = data;\n            if (!latestUpdate || data.lastUpdated > latestUpdate) {\n                latestUpdate = data.lastUpdated;\n            }\n        }\n    }\n    \n    res.json({\n        lastUpdated: latestUpdate || new Date().toISOString(),\n        data: result\n    });\n});\n\nexport default router;\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/seed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/src/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/server/vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/documents.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/exams.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/outlookSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/proxyClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/schedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/subjects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/successRate.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/api/user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/AppHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/Calendar/CalendarGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/Calendar/CalendarHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/Calendar/DayColumn.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/CalendarEventCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/DatePickerPopup.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/root/reis/src/components/DatePickerPopup.tsx:70:13\n  68 |             }\n  69 |\n> 70 |             setPosition({ top, left });\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  71 |         }\n  72 |     }, [isOpen, anchorRef]);\n  73 |","line":70,"column":13,"nodeType":null,"endLine":70,"endColumn":24},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/root/reis/src/components/DatePickerPopup.tsx:77:13\n  75 |     useEffect(() => {\n  76 |         if (isOpen) {\n> 77 |             setSelectedDate(null);\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  78 |             setSelectedTermId(null);\n  79 |             if (terms.length > 0) {\n  80 |                 const [day, month, year] = terms[0].date.split('.').map(Number);","line":77,"column":13,"nodeType":null,"endLine":77,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo, useEffect, useRef, useCallback } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport {\n    format,\n    addMonths,\n    subMonths,\n    startOfMonth,\n    endOfMonth,\n    startOfWeek,\n    endOfWeek,\n    eachDayOfInterval,\n    isSameMonth,\n    isSameDay,\n    isToday\n} from 'date-fns';\nimport { cs } from 'date-fns/locale';\nimport type { ExamTerm, ExamSubject } from '../types/exams';\n\ninterface DatePickerPopupProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onConfirm: (termId: string) => void;\n    terms: ExamTerm[];\n    anchorRef: React.RefObject<HTMLElement | null>;\n    allExams?: ExamSubject[];\n}\n\nexport function DatePickerPopup({\n    isOpen,\n    onClose,\n    onConfirm,\n    terms,\n    anchorRef,\n    allExams = []\n}: DatePickerPopupProps) {\n    const popupRef = useRef<HTMLDivElement>(null);\n    const [currentDate, setCurrentDate] = useState(new Date());\n    const [selectedDate, setSelectedDate] = useState<string | null>(null);\n    const [selectedTermId, setSelectedTermId] = useState<string | null>(null);\n    const [position, setPosition] = useState({ top: 0, left: 0 });\n\n    // Calculate position - prefer below anchor, flip above if needed\n    useEffect(() => {\n        if (isOpen && anchorRef.current) {\n            const rect = anchorRef.current.getBoundingClientRect();\n            const popupWidth = 260;\n            const popupHeight = 420; // Approximate max height\n            const padding = 12;\n\n            let left = rect.left;\n            let top = rect.bottom + 4; // Try below first\n\n            // Check right boundary\n            if (left + popupWidth > window.innerWidth - padding) {\n                left = rect.right - popupWidth;\n            }\n            if (left < padding) {\n                left = padding;\n            }\n\n            // Check bottom boundary - flip above if not enough space\n            if (top + popupHeight > window.innerHeight - padding) {\n                top = rect.top - popupHeight - 4; // Position above\n                // If still not enough space above, just position at top with scroll\n                if (top < padding) {\n                    top = padding;\n                }\n            }\n\n            setPosition({ top, left });\n        }\n    }, [isOpen, anchorRef]);\n\n    // Reset on open\n    useEffect(() => {\n        if (isOpen) {\n            setSelectedDate(null);\n            setSelectedTermId(null);\n            if (terms.length > 0) {\n                const [day, month, year] = terms[0].date.split('.').map(Number);\n                setCurrentDate(new Date(year, month - 1, day));\n            }\n        }\n    }, [isOpen, terms]);\n\n    // Handle click outside - uses ref check\n    const handleBackdropClick = useCallback((e: React.MouseEvent) => {\n        // Only close if clicking the backdrop itself\n        if (e.target === e.currentTarget) {\n            onClose();\n        }\n    }, [onClose]);\n\n    // Escape key\n    useEffect(() => {\n        if (!isOpen) return;\n        const handleEscape = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') onClose();\n        };\n        document.addEventListener('keydown', handleEscape);\n        return () => document.removeEventListener('keydown', handleEscape);\n    }, [isOpen, onClose]);\n\n    // Available dates from terms\n    const availableDates = useMemo(() => {\n        const dates: { date: Date; dateStr: string; isFull: boolean }[] = [];\n        const seen = new Set<string>();\n\n        terms.forEach(term => {\n            if (!seen.has(term.date)) {\n                seen.add(term.date);\n                const [day, month, year] = term.date.split('.').map(Number);\n                const termsOnDate = terms.filter(t => t.date === term.date);\n                const allFull = termsOnDate.every(t => t.full);\n                dates.push({\n                    date: new Date(year, month - 1, day),\n                    dateStr: term.date,\n                    isFull: allFull\n                });\n            }\n        });\n        return dates;\n    }, [terms]);\n\n    // Other registered exams\n    const otherRegisteredDates = useMemo(() => {\n        const dates: { date: Date; label: string }[] = [];\n        allExams.forEach(subject => {\n            subject.sections.forEach(section => {\n                if (section.status === 'registered' && section.registeredTerm?.date) {\n                    const [day, month, year] = section.registeredTerm.date.split('.').map(Number);\n                    dates.push({\n                        date: new Date(year, month - 1, day),\n                        label: subject.name\n                    });\n                }\n            });\n        });\n        return dates;\n    }, [allExams]);\n\n    // Terms for selected date\n    const termsForSelectedDate = useMemo(() => {\n        if (!selectedDate) return [];\n        return terms.filter(t => t.date === selectedDate);\n    }, [selectedDate, terms]);\n\n    // Calendar data\n    const days = useMemo(() => {\n        const start = startOfWeek(startOfMonth(currentDate), { weekStartsOn: 1 });\n        const end = endOfWeek(endOfMonth(currentDate), { weekStartsOn: 1 });\n        return eachDayOfInterval({ start, end });\n    }, [currentDate]);\n\n    const weeks = useMemo(() => {\n        const weeksArray = [];\n        for (let i = 0; i < days.length; i += 7) {\n            weeksArray.push(days.slice(i, i + 7));\n        }\n        return weeksArray;\n    }, [days]);\n\n    const daysOfWeek = ['po', '√∫t', 'st', 'ƒçt', 'p√°', 'so', 'ne'];\n\n    if (!isOpen) return null;\n\n    return (\n        // Full-screen invisible backdrop that captures outside clicks\n        <div\n            className=\"fixed inset-0 z-[100]\"\n            onClick={handleBackdropClick}\n        >\n            {/* The popup */}\n            <div\n                ref={popupRef}\n                className=\"absolute bg-white rounded-xl shadow-popover-heavy border border-slate-200 w-[260px]\"\n                style={{ top: position.top, left: position.left }}\n                onClick={e => e.stopPropagation()}\n            >\n                {/* Calendar */}\n                <div className=\"p-3\">\n                    {/* Month Header */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-semibold text-slate-700 capitalize\">\n                            {format(currentDate, 'LLLL yyyy', { locale: cs })}\n                        </span>\n                        <div className=\"flex gap-0.5\">\n                            <button\n                                onClick={() => setCurrentDate(subMonths(currentDate, 1))}\n                                className=\"w-6 h-6 flex items-center justify-center hover:bg-slate-200 rounded text-slate-500\"\n                            >\n                                <ChevronLeft size={14} />\n                            </button>\n                            <button\n                                onClick={() => setCurrentDate(addMonths(currentDate, 1))}\n                                className=\"w-6 h-6 flex items-center justify-center hover:bg-slate-200 rounded text-slate-500\"\n                            >\n                                <ChevronRight size={14} />\n                            </button>\n                        </div>\n                    </div>\n\n                    {/* Days Header */}\n                    <div className=\"grid grid-cols-7 gap-0\">\n                        {daysOfWeek.map((day, i) => (\n                            <div key={i} className=\"h-6 flex items-center justify-center text-[10px] font-medium text-slate-400 uppercase\">\n                                {day}\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* Date Grid */}\n                    <div className=\"flex flex-col\">\n                        {weeks.map((week, weekIndex) => (\n                            <div key={weekIndex} className=\"grid grid-cols-7\">\n                                {week.map((day) => {\n                                    const dateInfo = availableDates.find(d => isSameDay(d.date, day));\n                                    const hasAvailableExam = !!dateInfo && !dateInfo.isFull;\n                                    const isFull = dateInfo?.isFull ?? false;\n                                    const isCurrentMonth = isSameMonth(day, currentDate);\n                                    const isTodayDate = isToday(day);\n                                    const isSelected = dateInfo && selectedDate === dateInfo.dateStr;\n                                    const otherExam = otherRegisteredDates.find(d => isSameDay(d.date, day));\n\n                                    return (\n                                        <div\n                                            key={day.toString()}\n                                            className={`flex flex-col items-center justify-start relative ${otherExam ? 'h-12' : 'h-8'}`}\n                                        >\n                                            <button\n                                                onClick={() => {\n                                                    if (hasAvailableExam && dateInfo) {\n                                                        setSelectedDate(dateInfo.dateStr);\n                                                        setSelectedTermId(null);\n                                                    }\n                                                }}\n                                                disabled={!hasAvailableExam}\n                                                className={`\n                                                    w-7 h-7 flex items-center justify-center rounded-full text-xs transition-all relative\n                                                    ${isSelected\n                                                        ? 'bg-primary text-white font-bold shadow-sm'\n                                                        : hasAvailableExam\n                                                            ? 'bg-primary text-white font-bold hover:bg-primary/80 cursor-pointer shadow-sm'\n                                                            : isFull\n                                                                ? 'text-slate-300 cursor-default line-through'\n                                                                : isTodayDate\n                                                                    ? 'bg-slate-100 ring-2 ring-slate-400 text-slate-700 font-semibold cursor-default'\n                                                                    : isCurrentMonth\n                                                                        ? 'text-slate-400 cursor-default'\n                                                                        : 'text-slate-200 cursor-default'\n                                                    }\n                                                `}\n                                            >\n                                                {format(day, 'd')}\n                                            </button>\n\n                                            {/* Today label */}\n                                            {isTodayDate && !hasAvailableExam && (\n                                                <span className=\"text-[8px] font-medium text-slate-500 mt-0.5\">Dnes</span>\n                                            )}\n\n                                            {/* Mini event preview for other exams */}\n                                            {otherExam && (\n                                                <div\n                                                    className=\"text-[7px] text-error font-medium mt-0.5 max-w-[32px] truncate text-center\"\n                                                    title={otherExam.label}\n                                                >\n                                                    {otherExam.label.split(' - ')[0]}\n                                                </div>\n                                            )}\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* Legend */}\n                    <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2 pt-2 border-t border-slate-200 text-[10px] text-slate-500\">\n                        <span className=\"flex items-center gap-1\">\n                            <span className=\"w-4 h-4 rounded-full bg-primary flex items-center justify-center text-white font-bold text-[8px] shadow-sm\">15</span>\n                            Voln√Ω term√≠n\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                            <span className=\"w-4 h-4 rounded-full bg-slate-100 ring-2 ring-slate-400 flex items-center justify-center text-slate-700 font-semibold text-[8px]\">12</span>\n                            Dnes\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                            <span className=\"text-[7px] text-error font-medium\">ALG</span>\n                            Jin√° zkou≈°ka\n                        </span>\n                    </div>\n                </div>\n\n                {/* Time Selector */}\n                {selectedDate && (\n                    <div className=\"px-3 pb-2 border-t border-slate-200 pt-2 bg-white\">\n                        <div className=\"text-[10px] font-medium text-slate-500 mb-1.5\">Vyber ƒças:</div>\n                        <div className=\"flex flex-wrap gap-1.5\">\n                            {termsForSelectedDate.map(term => (\n                                <button\n                                    key={term.id}\n                                    onClick={() => setSelectedTermId(term.id)}\n                                    disabled={term.full}\n                                    className={`\n                                        btn btn-xs font-medium h-auto py-1 px-2 min-h-0\n                                        ${term.full\n                                            ? 'btn-disabled bg-slate-100 text-slate-300'\n                                            : selectedTermId === term.id\n                                                ? 'btn-primary text-white'\n                                                : 'btn-ghost bg-white text-slate-700 border-slate-200 hover:bg-slate-100'\n                                        }\n                                    `}\n                                >\n                                    {term.time}\n                                    {term.capacity && <span className=\"ml-0.5 opacity-60\">({term.capacity})</span>}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n                )}\n\n                {/* Confirm Button */}\n                {selectedTermId && (\n                    <div className=\"px-3 pb-3 bg-white\">\n                        <button\n                            onClick={() => onConfirm(selectedTermId)}\n                            className=\"btn btn-primary btn-sm w-full\"\n                        >\n                            Potvrdit\n                        </button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamDrawer.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useExams\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":29,"column":46,"nodeType":"Identifier","endLine":29,"endColumn":54},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":32,"column":31,"nodeType":"Identifier","endLine":32,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":33,"column":39,"nodeType":"Identifier","endLine":33,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_setError' is assigned a value but never used.","line":34,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":28},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":34,"column":32,"nodeType":"Identifier","endLine":34,"endColumn":40},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":37,"column":5,"nodeType":"Identifier","endLine":37,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":47,"column":55,"nodeType":"Identifier","endLine":47,"endColumn":63},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":50,"column":45,"nodeType":"Identifier","endLine":50,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":51,"column":43,"nodeType":"Identifier","endLine":51,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useRef\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":52,"column":28,"nodeType":"Identifier","endLine":52,"endColumn":34},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":55,"column":59,"nodeType":"Identifier","endLine":55,"endColumn":67},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":58,"column":55,"nodeType":"Identifier","endLine":58,"endColumn":63},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":66,"column":5,"nodeType":"Identifier","endLine":66,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":94,"column":5,"nodeType":"Identifier","endLine":94,"endColumn":14}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { X, ChevronDown } from 'lucide-react';\nimport { Accordion, AccordionItem, AccordionHeader, AccordionContent, AccordionTrigger } from './ui/accordion';\nimport { Button } from './ui/button';\nimport { useState, useEffect, useRef } from 'react';\nimport { fetchExamData, registerExam, unregisterExam } from '../api/exams';\nimport { useExams } from '../hooks/data';\nimport { DatePickerPopup } from './DatePickerPopup';\n\n// Re-export types from centralized types file\nexport type { ExamTerm, ExamSection, ExamSubject } from '../types/exams';\nimport type { ExamTerm, ExamSection, ExamSubject } from '../types/exams';\n\ninterface ExamDrawerProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nfunction getDayOfWeek(dateString: string): string {\n    const [day, month, year] = dateString.split('.');\n    const date = new Date(Number(year), Number(month) - 1, Number(day));\n    const days = ['ne', 'po', '√∫t', 'st', 'ƒçt', 'p√°', 'so'];\n    return days[date.getDay()];\n}\n\nexport function ExamDrawer({ isOpen, onClose }: ExamDrawerProps) {\n    if (!isOpen) return null;\n\n    // Get stored exam data from hook (stale-while-revalidate)\n    const { exams: storedExams, isLoaded } = useExams();\n\n    // Local state for exams (allows updates after registration actions)\n    const [exams, setExams] = useState<ExamSubject[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, _setError] = useState<string | null>(null);\n\n    // Sync stored exams to local state\n    useEffect(() => {\n        if (storedExams && storedExams.length > 0) {\n            setExams(storedExams);\n            setIsLoading(false);\n        } else if (isLoaded) {\n            setIsLoading(false);\n        }\n    }, [storedExams, isLoaded]);\n\n    // Accordion Control\n    const [expandedSubjectId, setExpandedSubjectId] = useState<string>(\"\");\n\n    // Popup state - now stores anchor ref too\n    const [popupSection, setPopupSection] = useState<ExamSection | null>(null);\n    const [popupAnchor, setPopupAnchor] = useState<HTMLButtonElement | null>(null);\n    const popupAnchorRef = useRef<HTMLButtonElement | null>(null);\n    popupAnchorRef.current = popupAnchor;\n\n    const [processingSectionId, setProcessingSectionId] = useState<string | null>(null);\n\n    // Auto-booking state\n    const [autoBookingTermId, setAutoBookingTermId] = useState<string | null>(null);\n    // const [now, setNow] = useState(new Date());\n\n    // useEffect(() => {\n    //     const interval = setInterval(() => setNow(new Date()), 1000);\n    //     return () => clearInterval(interval);\n    // }, []);\n\n    useEffect(() => {\n        const handleEscape = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n                if (popupSection) {\n                    setPopupSection(null);\n                } else {\n                    onClose();\n                }\n            }\n        };\n\n        if (isOpen) {\n            document.addEventListener('keydown', handleEscape);\n        }\n\n        return () => {\n            document.removeEventListener('keydown', handleEscape);\n        };\n    }, [isOpen, onClose, popupSection]);\n\n    const parseDate = (dateStr: string): Date => {\n        const [datePart, timePart] = dateStr.split(' ');\n        const [day, month, year] = datePart.split('.').map(Number);\n        const [hours, minutes] = timePart.split(':').map(Number);\n        return new Date(year, month - 1, day, hours, minutes);\n    };\n\n    // Auto-booking effect\n    useEffect(() => {\n        if (!autoBookingTermId) return;\n\n        const interval = setInterval(() => {\n            let foundTerm: ExamTerm | undefined;\n            let foundSection: ExamSection | undefined;\n\n            for (const subject of exams) {\n                for (const section of subject.sections) {\n                    const term = section.terms.find(t => t.id === autoBookingTermId);\n                    if (term) {\n                        foundTerm = term;\n                        foundSection = section;\n                        break;\n                    }\n                }\n                if (foundTerm) break;\n            }\n\n            if (foundTerm && foundSection && foundTerm.registrationStart) {\n                const start = parseDate(foundTerm.registrationStart);\n                if (new Date() >= start) {\n                    handleRegister(foundSection, foundTerm.id);\n                    setAutoBookingTermId(null);\n                }\n            } else {\n                setAutoBookingTermId(null);\n            }\n        }, 1000);\n\n        return () => clearInterval(interval);\n    }, [autoBookingTermId, exams]);\n\n    const handleRegister = async (section: ExamSection, termId: string) => {\n        setProcessingSectionId(section.id);\n\n        try {\n            // If already registered and we are changing, unregister first\n            if (section.status === 'registered' && section.registeredTerm?.id) {\n                const successUnreg = await unregisterExam(section.registeredTerm.id);\n                if (!successUnreg) {\n                    alert(\"Failed to unregister from previous term.\");\n                    setProcessingSectionId(null);\n                    return;\n                }\n            }\n\n            // Register for new term\n            const successReg = await registerExam(termId);\n            if (successReg) {\n                // Refresh data\n                const data = await fetchExamData();\n                setExams(data);\n                // Close popup\n                setPopupSection(null);\n            } else {\n                alert(\"Registration failed. The term might be full.\");\n            }\n        } catch (err) {\n            console.error(err);\n            alert(\"An error occurred.\");\n        } finally {\n            setProcessingSectionId(null);\n        }\n    };\n\n    const openDatePicker = (section: ExamSection, button: HTMLButtonElement) => {\n        setPopupSection(section);\n        setPopupAnchor(button);\n    };\n\n    const closeDatePicker = () => {\n        setPopupSection(null);\n        setPopupAnchor(null);\n    };\n\n    return (\n        <>\n            <div className=\"fixed inset-0 z-50 flex justify-end items-stretch p-4 isolate\">\n                {/* Layer 0: Scrim */}\n                <div\n                    className=\"absolute inset-0 bg-black/15 transition-opacity\"\n                    onClick={onClose}\n                />\n\n                {/* Drawer Container - No floating calendar */}\n                <div className=\"w-full flex justify-end items-start h-full pt-10 pb-10 relative z-10 pointer-events-none\">\n                    {/* Layer 1: The Component - Exam Drawer */}\n                    <div className=\"w-[600px] bg-white shadow-2xl rounded-2xl flex flex-col overflow-hidden border border-gray-100 font-sans h-full animate-in slide-in-from-right duration-300 pointer-events-auto\">\n\n                        {/* Header */}\n                        <div className=\"sticky top-0 z-10 flex items-center justify-between px-6 py-5 bg-white border-b border-slate-100\">\n                            <h2 className=\"text-xl font-semibold text-slate-900 tracking-tight\">Zkou≈°ky</h2>\n                            <button\n                                onClick={onClose}\n                                className=\"btn btn-ghost btn-circle btn-sm -mr-2 text-slate-400 hover:text-slate-600\"\n                            >\n                                <X size={20} />\n                            </button>\n                        </div>\n\n                        {/* Auto-booking Banner */}\n                        {autoBookingTermId && (\n                            <div className=\"bg-amber-50 border-b border-amber-100 px-6 py-3 flex items-center gap-3 animate-in slide-in-from-top-2\">\n                                <div className=\"w-2 h-2 rounded-full bg-amber-500 animate-pulse\" />\n                                <span className=\"text-sm text-amber-800 font-medium\">\n                                    Auto-rezervace aktivn√≠. Nezav√≠rejte tuto z√°lo≈æku!\n                                </span>\n                            </div>\n                        )}\n\n                        {/* Content - Scrollable List */}\n                        <div className=\"flex-1 overflow-y-auto\">\n                            {isLoading ? (\n                                <div className=\"flex items-center justify-center h-full text-slate-400\">\n                                    Naƒç√≠t√°n√≠ zkou≈°ek...\n                                </div>\n                            ) : error ? (\n                                <div className=\"flex items-center justify-center h-full text-error\">\n                                    {error}\n                                </div>\n                            ) : (\n                                <Accordion\n                                    type=\"single\"\n                                    collapsible\n                                    className=\"flex flex-col\"\n                                    value={expandedSubjectId}\n                                    onValueChange={setExpandedSubjectId}\n                                >\n                                    {exams.map((subject) => {\n                                        const isRegistered = subject.sections.some(s => s.status === 'registered');\n\n                                        return (\n                                            <AccordionItem key={subject.id} value={subject.id} className=\"border-b border-slate-100 last:border-0\">\n                                                <AccordionHeader className=\"flex\">\n                                                    <AccordionTrigger className=\"flex flex-1 items-center justify-between px-6 py-4 bg-white hover:bg-slate-50 transition-all group data-[state=open]:bg-slate-50/50\">\n                                                        <div className=\"flex flex-col items-start gap-0.5\">\n                                                            <span className=\"font-semibold text-slate-900 text-base truncate max-w-[350px]\">{subject.name}</span>\n                                                            <span className=\"text-xs text-slate-500 font-medium\">{subject.code}</span>\n                                                        </div>\n                                                        <div className=\"flex items-center gap-3\">\n                                                            {!isRegistered && (\n                                                                <div className=\"w-2 h-2 rounded-full bg-amber-500\" />\n                                                            )}\n                                                            <ChevronDown className=\"text-slate-400 transition-transform duration-200 ease-out group-data-[state=open]:rotate-180\" size={16} />\n                                                        </div>\n                                                    </AccordionTrigger>\n                                                </AccordionHeader>\n                                                <AccordionContent className=\"overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up\">\n                                                    <div className=\"px-6 py-4 bg-slate-50/50 space-y-2\">\n                                                        {subject.sections.map((section) => {\n                                                            const isProcessing = processingSectionId === section.id;\n\n                                                            return (\n                                                                <div\n                                                                    key={section.id}\n                                                                    className=\"group flex items-center justify-between p-3 rounded-lg transition-all border hover:bg-white hover:shadow-sm border-transparent hover:border-slate-200\"\n                                                                >\n                                                                    {/* Left: Section Name */}\n                                                                    <div className=\"flex flex-col gap-0.5 min-w-0\">\n                                                                        <span className=\"font-medium text-slate-900 text-sm capitalize truncate\" title={section.name}>\n                                                                            {section.name}\n                                                                        </span>\n                                                                        {section.status === 'registered' && section.registeredTerm && (\n                                                                            <span className=\"text-xs text-slate-500\">\n                                                                                {section.registeredTerm.date} {section.registeredTerm.time} ({getDayOfWeek(section.registeredTerm.date)})\n                                                                                {section.registeredTerm.room && ` ‚Ä¢ ${section.registeredTerm.room}`}\n                                                                            </span>\n                                                                        )}\n                                                                    </div>\n\n                                                                    {/* Right: Action Button */}\n                                                                    <div className=\"flex items-center gap-2 shrink-0\">\n                                                                        {section.status === 'registered' ? (\n                                                                            <Button\n                                                                                variant=\"ghost\"\n                                                                                size=\"sm\"\n                                                                                onClick={(e) => openDatePicker(section, e.currentTarget)}\n                                                                                disabled={isProcessing}\n                                                                                className=\"text-rose-500 hover:text-rose-600 hover:bg-rose-50\"\n                                                                            >\n                                                                                Zmƒõnit\n                                                                            </Button>\n                                                                        ) : (\n                                                                            <Button\n                                                                                size=\"sm\"\n                                                                                onClick={(e) => openDatePicker(section, e.currentTarget)}\n                                                                                disabled={isProcessing}\n                                                                                className=\"bg-indigo-600 hover:bg-indigo-700 text-white\"\n                                                                            >\n                                                                                Vyber datum\n                                                                            </Button>\n                                                                        )}\n                                                                    </div>\n                                                                </div>\n                                                            );\n                                                        })}\n                                                    </div>\n                                                </AccordionContent>\n                                            </AccordionItem>\n                                        );\n                                    })}\n                                </Accordion>\n                            )}\n                        </div>\n\n                        {/* Footer */}\n                        <div className=\"p-4 border-t border-gray-100 bg-gray-50 flex justify-center\">\n                            <a\n                                href=\"https://is.mendelu.cz/auth/student/terminy_seznam.pl?lang=cz\"\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"text-xs text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1\"\n                            >\n                                P≈ôej√≠t na str√°nku zkou≈°ek v IS\n                                <svg width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\" /><polyline points=\"15 3 21 3 21 9\" /><line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\" /></svg>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Date Picker Popup */}\n            <DatePickerPopup\n                isOpen={!!popupSection}\n                onClose={closeDatePicker}\n                onConfirm={(termId) => popupSection && handleRegister(popupSection, termId)}\n                terms={popupSection?.terms ?? []}\n                anchorRef={popupAnchorRef}\n                allExams={exams}\n            />\n        </>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamPanel/ExamFilterBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamPanel/ExamPanelHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamPanel/ExamSectionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamPanel/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamPanel/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ExamTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/NotificationFeed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/OutlookSyncHint.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handleDismiss` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/root/reis/src/components/OutlookSyncHint.tsx:53:17\n  51 |         if (isVisible) {\n  52 |             const timer = setTimeout(() => {\n> 53 |                 handleDismiss();\n     |                 ^^^^^^^^^^^^^ `handleDismiss` accessed before it is declared\n  54 |             }, 12000);\n  55 |             return () => clearTimeout(timer);\n  56 |         }\n\n/root/reis/src/components/OutlookSyncHint.tsx:66:5\n  64 |     }, [isSyncEnabled, isVisible]);\n  65 |\n> 66 |     const handleDismiss = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 67 |         setIsVisible(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 68 |         setHasBeenDismissed(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 69 |         localStorage.setItem(OUTLOOK_HINT_STORAGE_KEY, 'true');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 70 |     };\n     | ^^^^^^^ `handleDismiss` is declared here\n  71 |\n  72 |     const handleSetup = () => {\n  73 |         handleDismiss();","line":53,"column":17,"nodeType":null,"endLine":53,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'motion/react';\nimport { Calendar, X, ChevronRight } from 'lucide-react';\n\nconst OUTLOOK_HINT_STORAGE_KEY = 'reis_outlook_hint_shown';\nconst OUTLOOK_HINT_NAV_THRESHOLD = 2;\n\ninterface OutlookSyncHintProps {\n    /** Number of week navigations this session */\n    navigationCount: number;\n    /** Whether Outlook sync is currently enabled */\n    isSyncEnabled: boolean | null;\n    /** Called when user clicks \"Nastavit\" - should open settings popup */\n    onSetup: () => void;\n}\n\n/**\n * Spotlight tooltip that teaches users about Outlook sync.\n * Appears after 2 week navigations if sync is not enabled.\n */\nexport function OutlookSyncHint({ navigationCount, isSyncEnabled, onSetup }: OutlookSyncHintProps) {\n    const [isVisible, setIsVisible] = useState(false);\n    const [hasBeenDismissed, setHasBeenDismissed] = useState(false);\n\n    useEffect(() => {\n        // Check if already seen\n        const hasSeenHint = localStorage.getItem(OUTLOOK_HINT_STORAGE_KEY);\n        if (hasSeenHint) {\n            setHasBeenDismissed(true);\n            return;\n        }\n\n        // Show conditions:\n        // 1. Navigation count >= threshold\n        // 2. Sync is NOT enabled (false, not null/loading)\n        // 3. Not dismissed this session\n        const shouldShow = \n            navigationCount >= OUTLOOK_HINT_NAV_THRESHOLD &&\n            isSyncEnabled === false &&\n            !hasBeenDismissed;\n\n        if (shouldShow && !isVisible) {\n            // Delay slightly for smoother appearance\n            const timer = setTimeout(() => setIsVisible(true), 500);\n            return () => clearTimeout(timer);\n        }\n    }, [navigationCount, isSyncEnabled, hasBeenDismissed, isVisible]);\n\n    // Auto-dismiss after 12 seconds\n    useEffect(() => {\n        if (isVisible) {\n            const timer = setTimeout(() => {\n                handleDismiss();\n            }, 12000);\n            return () => clearTimeout(timer);\n        }\n    }, [isVisible]);\n\n    // Hide if sync gets enabled\n    useEffect(() => {\n        if (isSyncEnabled === true && isVisible) {\n            setIsVisible(false);\n        }\n    }, [isSyncEnabled, isVisible]);\n\n    const handleDismiss = () => {\n        setIsVisible(false);\n        setHasBeenDismissed(true);\n        localStorage.setItem(OUTLOOK_HINT_STORAGE_KEY, 'true');\n    };\n\n    const handleSetup = () => {\n        handleDismiss();\n        onSetup();\n    };\n\n    return (\n        <AnimatePresence>\n            {isVisible && (\n                <>\n                    {/* Semi-transparent backdrop - only covers calendar area, not header navigation */}\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        transition={{ duration: 0.2 }}\n                        className=\"fixed inset-0 top-14 bg-black/20 z-[100]\"\n                        onClick={handleDismiss}\n                    />\n                    \n                    {/* Spotlight tooltip - positioned near sidebar Profil button */}\n                    <motion.div\n                        initial={{ opacity: 0, x: -20, scale: 0.95 }}\n                        animate={{ opacity: 1, x: 0, scale: 1 }}\n                        exit={{ opacity: 0, x: -20, scale: 0.95 }}\n                        transition={{ duration: 0.3, ease: \"easeOut\" }}\n                        className=\"fixed left-24 bottom-20 z-[101] w-80\"\n                    >\n                        {/* Arrow pointing to sidebar */}\n                        <div className=\"absolute -left-2 bottom-8 w-0 h-0 border-t-8 border-b-8 border-r-8 border-transparent border-r-white\" />\n                        \n                        {/* Card */}\n                        <div className=\"bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden\">\n                            {/* Header */}\n                            <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 py-3 flex items-center gap-3\">\n                                <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center\">\n                                    <Calendar className=\"w-5 h-5 text-white\" />\n                                </div>\n                                <span className=\"text-white font-semibold\">Synchronizace s Outlookem</span>\n                                <button \n                                    onClick={handleDismiss}\n                                    className=\"ml-auto p-1 hover:bg-white/20 rounded-lg transition-colors\"\n                                >\n                                    <X className=\"w-4 h-4 text-white/80\" />\n                                </button>\n                            </div>\n                            \n                            {/* Body */}\n                            <div className=\"p-4\">\n                                <p className=\"text-gray-600 text-sm leading-relaxed mb-4\">\n                                    P≈ôidej si p≈ôedn√°≈°ky a zkou≈°ky automaticky do sv√©ho Outlook kalend√°≈ôe. \n                                    U≈æ nikdy nezme≈°k√°≈° d≈Øle≈æitou hodinu!\n                                </p>\n                                \n                                {/* Actions */}\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        onClick={handleSetup}\n                                        className=\"flex-1 btn btn-primary btn-sm gap-1 bg-emerald-600 hover:bg-emerald-700 border-emerald-600 hover:border-emerald-700\"\n                                    >\n                                        Nastavit\n                                        <ChevronRight size={16} />\n                                    </button>\n                                    <button\n                                        onClick={handleDismiss}\n                                        className=\"btn btn-ghost btn-sm text-gray-500\"\n                                    >\n                                        Pozdƒõji\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/Search/SearchResultItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_currentView' is defined but never used.","line":26,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":52},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: This value cannot be modified\n\nModifying a variable defined outside a component or hook is not allowed. Consider using an effect.\n\n/root/reis/src/components/Sidebar.tsx:75:7\n  73 |     }\n  74 |     if (item.href) {\n> 75 |       window.location.href = item.href;\n     |       ^^^^^^^^^^^^^^^ value cannot be modified\n  76 |     }\n  77 |   };\n  78 |","line":75,"column":7,"nodeType":null,"endLine":75,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react';\nimport {\n  LayoutGrid,\n  Mail,\n  Settings,\n  CalendarCheck,\n  Users\n} from 'lucide-react';\nimport { MENDELU_LOGO_PATH } from '../constants/icons';\nimport { useUserParams } from '../hooks/useUserParams';\nimport { getFacultySync } from '../utils/userParams';\nimport { getMainMenuItems, type MenuItem } from './menuConfig';\nimport { getUserAssociation } from '../services/spolky';\nimport { NavItem } from './Sidebar/NavItem';\nimport { ProfilePopup } from './Sidebar/ProfilePopup';\n\nexport type AppView = 'calendar' | 'exams';\n\ninterface SidebarProps {\n  currentView: AppView;\n  onViewChange: (view: AppView) => void;\n  /** Ref that will be populated with a function to open settings popup */\n  onOpenSettingsRef?: React.MutableRefObject<(() => void) | null>;\n}\n\nexport const Sidebar = ({ currentView: _currentView, onViewChange, onOpenSettingsRef }: SidebarProps) => {\n  const [activeItem, setActiveItem] = useState<string>('dashboard');\n  const [hoveredItem, setHoveredItem] = useState<string | null>(null);\n  const [profilHovered, setProfilHovered] = useState(false);\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const profilTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // Expose function to open settings popup\n  useEffect(() => {\n    if (onOpenSettingsRef) {\n      onOpenSettingsRef.current = () => {\n        setProfilHovered(true);\n      };\n    }\n    return () => {\n      if (onOpenSettingsRef) {\n        onOpenSettingsRef.current = null;\n      }\n    };\n  }, [onOpenSettingsRef]);\n\n  const { params } = useUserParams();\n  const studiumId = params?.studium || '';\n  const obdobiId = params?.obdobi || '';\n\n  // Menu configuration\n  const mainMenuItems: MenuItem[] = getMainMenuItems(studiumId, obdobiId);\n\n  const handleMouseEnter = (itemId: string) => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    setHoveredItem(itemId);\n  };\n\n  const handleMouseLeave = () => {\n    timeoutRef.current = setTimeout(() => {\n      setHoveredItem(null);\n    }, 300);\n  };\n\n  const handleItemClick = (item: MenuItem) => {\n    setActiveItem(item.id);\n    // Handle view switching for home (dashboard)\n    if (item.id === 'dashboard') {\n      onViewChange('calendar');\n      return;\n    }\n    if (item.href) {\n      window.location.href = item.href;\n    }\n  };\n\n  return (\n    <>\n      {/* Desktop Sidebar */}\n      <aside className=\"hidden md:flex flex-col w-22 h-screen bg-base-200 border-r border-base-300 fixed left-0 top-0 z-40 items-center py-6\">\n        {/* Logo - click to return to calendar */}\n        <div \n          onClick={() => onViewChange('calendar')}\n          className=\"mb-8 w-10 h-10 rounded-xl bg-white shadow-sm flex items-center justify-center overflow-hidden cursor-pointer hover:shadow-md transition-shadow border border-base-300/50\"\n          title=\"Zpƒõt na rozvrh\"\n        >\n          <img src={MENDELU_LOGO_PATH} alt=\"Mendelu Logo\" className=\"w-8 h-8 object-contain\" />\n        </div>\n\n        {/* Navigation Items */}\n        <nav className=\"flex-1 flex flex-col w-full px-2 gap-2\">\n          {/* Dom≈Ø - Dashboard */}\n          <NavItem\n            item={mainMenuItems.find(i => i.id === 'dashboard')!}\n            isActive={activeItem === 'dashboard'}\n            isHovered={hoveredItem === 'dashboard'}\n            onMouseEnter={() => handleMouseEnter('dashboard')}\n            onMouseLeave={handleMouseLeave}\n            onClick={() => {\n              setActiveItem('dashboard');\n              onViewChange('calendar');\n            }}\n            onViewChange={onViewChange}\n          />\n\n          {/* Divider */}\n          <div className=\"h-px bg-base-300 mx-2 my-1\" />\n\n          {/* Zkousky - Own Section */}\n          <NavItem\n            item={{\n              id: 'zkousky',\n              label: 'Zkou≈°ky',\n              icon: <CalendarCheck className=\"w-5 h-5\" />,\n              expandable: false\n            }}\n            isActive={activeItem === 'zkousky'}\n            isHovered={hoveredItem === 'zkousky'}\n            onMouseEnter={() => handleMouseEnter('zkousky')}\n            onMouseLeave={handleMouseLeave}\n            onClick={() => {\n              setActiveItem('zkousky');\n              onViewChange('exams');\n            }}\n            onViewChange={onViewChange}\n          />\n\n          {/* Divider */}\n          <div className=\"h-px bg-base-300 mx-2 my-1\" />\n\n          {/* Other Menu Items (excluding dashboard) */}\n          {mainMenuItems.filter(item => item.id !== 'dashboard').map((item) => (\n            <NavItem\n              key={item.id}\n              item={item}\n              isActive={activeItem === item.id}\n              isHovered={hoveredItem === item.id}\n              onMouseEnter={() => handleMouseEnter(item.id)}\n              onMouseLeave={handleMouseLeave}\n              onClick={() => handleItemClick(item)}\n              onViewChange={onViewChange}\n            />\n          ))}\n        </nav>\n\n        {/* Bottom Actions */}\n        <div className=\"flex flex-col gap-2 px-2 w-full mt-auto\">\n          {/* Spolek Button - Dynamic based on faculty */}\n          {(() => {\n            const facultyId = getFacultySync() || '2';\n            const association = getUserAssociation(facultyId);\n            if (!association) return null;\n            \n            return (\n              <a \n                href={association.websiteUrl} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"w-12 h-12 rounded-xl flex flex-col items-center justify-center text-base-content/50 hover:bg-base-100 hover:text-primary hover:shadow-sm transition-all mx-auto group\"\n                title={association.name}\n              >\n                <Users className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n                <span className=\"text-[10px] mt-1 font-medium\">Spolek</span>\n              </a>\n            );\n          })()}\n          \n          {/* Divider */}\n          <div className=\"h-px bg-base-300 mx-2 my-1\" />\n          \n          <a href=\"https://teams.microsoft.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-12 h-12 rounded-xl flex flex-col items-center justify-center text-base-content/50 hover:bg-base-100 hover:text-info hover:shadow-sm transition-all mx-auto group\">\n            <LayoutGrid className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n            <span className=\"text-[10px] mt-1 font-medium\">Teams</span>\n          </a>\n          <a href=\"https://outlook.office.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-12 h-12 rounded-xl flex flex-col items-center justify-center text-base-content/50 hover:bg-base-100 hover:text-info hover:shadow-sm transition-all mx-auto group\">\n            <Mail className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n            <span className=\"text-[10px] mt-1 font-medium\">Outlook</span>\n          </a>\n          {/* Profil with popup */}\n          <div\n            className=\"relative\"\n            onMouseEnter={() => {\n              if (profilTimeoutRef.current) clearTimeout(profilTimeoutRef.current);\n              setProfilHovered(true);\n            }}\n            onMouseLeave={() => {\n              profilTimeoutRef.current = setTimeout(() => setProfilHovered(false), 300);\n            }}\n          >\n            <button className=\"w-12 h-12 rounded-xl flex flex-col items-center justify-center text-base-content/50 hover:bg-base-100 hover:text-base-content hover:shadow-sm transition-all mx-auto\">\n              <Settings className=\"w-5 h-5\" />\n              <span className=\"text-[10px] mt-1 font-medium\">Profil</span>\n            </button>\n\n            {/* Profil Popup */}\n            <ProfilePopup isOpen={profilHovered} />\n          </div>\n        </div>\n      </aside>\n    </>\n  );\n};","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/Sidebar/NavItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/Sidebar/ProfilePopup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SubjectFileDrawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SubjectFileDrawer/DragHint.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SubjectFileDrawer/DrawerHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SubjectFileDrawer/FileList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SubjectFileDrawer/index.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/root/reis/src/components/SubjectFileDrawer/index.tsx:68:9\n  66 |     useEffect(() => {\n  67 |         if (!isOpen || !lesson || !subjectsLoaded) return;\n> 68 |         setLoading(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  69 |         const cachedFiles = getFilesForSubject(lesson.courseCode);\n  70 |         setFiles(cachedFiles);\n  71 |         setLoading(false);","line":68,"column":9,"nodeType":null,"endLine":68,"endColumn":19},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/root/reis/src/components/SubjectFileDrawer/index.tsx:77:13\n  75 |     useEffect(() => {\n  76 |         if (!isOpen) {\n> 77 |             setShowDragHint(false);\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  78 |             setActiveTab('files');\n  79 |         }\n  80 |     }, [isOpen]);","line":77,"column":13,"nodeType":null,"endLine":77,"endColumn":28},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `lesson`, but the source dependencies were [lesson?.courseId, lesson?.courseCode, schedule]. Inferred less specific property than source.\n\n/root/reis/src/components/SubjectFileDrawer/index.tsx:101:38\n   99 |\n  100 |     // Resolve courseId from schedule if not present\n> 101 |     const resolvedCourseId = useMemo(() => {\n      |                                      ^^^^^^^\n> 102 |         if (lesson?.courseId) return lesson.courseId;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 103 |         if (!lesson?.courseCode || !schedule?.length) return '';\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 104 |         \n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 105 |         const matchingLesson = schedule.find(s => s.courseCode === lesson.courseCode && s.courseId);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 106 |         return matchingLesson?.courseId || '';\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 107 |     }, [lesson?.courseId, lesson?.courseCode, schedule]);\n      | ^^^^^^ Could not preserve existing manual memoization\n  108 |\n  109 |     // Group and sort files\n  110 |     const groupedFiles: FileGroup[] = useMemo(() => {","line":101,"column":38,"nodeType":null,"endLine":107,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `lesson`, but the source dependencies were [lesson?.courseId, lesson?.courseCode, schedule]. Inferred less specific property than source.\n\n/root/reis/src/components/SubjectFileDrawer/index.tsx:101:38\n   99 |\n  100 |     // Resolve courseId from schedule if not present\n> 101 |     const resolvedCourseId = useMemo(() => {\n      |                                      ^^^^^^^\n> 102 |         if (lesson?.courseId) return lesson.courseId;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 103 |         if (!lesson?.courseCode || !schedule?.length) return '';\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 104 |         \n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 105 |         const matchingLesson = schedule.find(s => s.courseCode === lesson.courseCode && s.courseId);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 106 |         return matchingLesson?.courseId || '';\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 107 |     }, [lesson?.courseId, lesson?.courseCode, schedule]);\n      | ^^^^^^ Could not preserve existing manual memoization\n  108 |\n  109 |     // Group and sort files\n  110 |     const groupedFiles: FileGroup[] = useMemo(() => {","line":101,"column":38,"nodeType":null,"endLine":107,"endColumn":6}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * SubjectFileDrawer Component (Refactored)\n * \n * Modular drawer for displaying subject files with drag selection.\n * Main orchestration component delegating to subcomponents.\n */\n\nimport { useState, useEffect, useRef, useMemo } from 'react';\nimport { loggers } from '../../utils/logger';\nimport { useSubjects, useSchedule } from '../../hooks/data';\nimport { getFilesForSubject } from '../../utils/apiUtils';\nimport { cleanFolderName } from '../../utils/fileUrl';\nimport { useFileActions } from '../../hooks/ui/useFileActions';\nimport { SuccessRateTab } from '../SuccessRateTab';\nimport type { BlockLesson } from '../../types/calendarTypes';\nimport type { ParsedFile } from '../../types/documents';\n\nimport { DrawerHeader } from './DrawerHeader';\nimport { FileList, FileListSkeleton } from './FileList';\nimport { DragHint, SelectionBox } from './DragHint';\nimport { useDragSelection } from './useDragSelection';\nimport type { FileGroup } from './types';\n\nconst DRAG_HINT_STORAGE_KEY = 'reis_drag_hint_shown';\n\ninterface SubjectFileDrawerProps {\n    lesson: BlockLesson | null;\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport function SubjectFileDrawer({ lesson, isOpen, onClose }: SubjectFileDrawerProps) {\n    const { isLoaded: subjectsLoaded } = useSubjects();\n    const { schedule } = useSchedule();\n    const { isDownloading, openFile, downloadZip } = useFileActions();\n\n    loggers.ui.info('[SubjectFileDrawer] Rendering. Open:', isOpen, 'Lesson:', lesson?.courseCode);\n\n    // State\n    const [activeTab, setActiveTab] = useState<'files' | 'stats'>('files');\n    const [files, setFiles] = useState<ParsedFile[] | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [showDragHint, setShowDragHint] = useState(false);\n\n    // Refs\n    const containerRef = useRef<HTMLDivElement>(null);\n    const contentRef = useRef<HTMLDivElement>(null);\n    const fileRefs = useRef<Map<string, HTMLDivElement>>(new Map());\n\n    // Drag selection hook\n    const {\n        selectedIds,\n        isDragging,\n        selectionBoxStyle,\n        ignoreClickRef,\n        handleMouseDown,\n        toggleSelect,\n    } = useDragSelection({\n        isOpen,\n        containerRef,\n        contentRef,\n        fileRefs\n    });\n\n    // Load files\n    useEffect(() => {\n        if (!isOpen || !lesson || !subjectsLoaded) return;\n        setLoading(true);\n        const cachedFiles = getFilesForSubject(lesson.courseCode);\n        setFiles(cachedFiles);\n        setLoading(false);\n    }, [isOpen, lesson, subjectsLoaded]);\n\n    // Reset tab on close\n    useEffect(() => {\n        if (!isOpen) {\n            setShowDragHint(false);\n            setActiveTab('files');\n        }\n    }, [isOpen]);\n\n    // Show drag hint on first use\n    useEffect(() => {\n        if (!isOpen || loading || !files || files.length === 0) return;\n        \n        const hasSeenHint = localStorage.getItem(DRAG_HINT_STORAGE_KEY);\n        if (hasSeenHint) return;\n        \n        localStorage.setItem(DRAG_HINT_STORAGE_KEY, 'true');\n        \n        const showTimer = setTimeout(() => setShowDragHint(true), 800);\n        const hideTimer = setTimeout(() => setShowDragHint(false), 4800);\n        \n        return () => {\n            clearTimeout(showTimer);\n            clearTimeout(hideTimer);\n        };\n    }, [isOpen, loading, files]);\n\n    // Resolve courseId from schedule if not present\n    const resolvedCourseId = useMemo(() => {\n        if (lesson?.courseId) return lesson.courseId;\n        if (!lesson?.courseCode || !schedule?.length) return '';\n        \n        const matchingLesson = schedule.find(s => s.courseCode === lesson.courseCode && s.courseId);\n        return matchingLesson?.courseId || '';\n    }, [lesson?.courseId, lesson?.courseCode, schedule]);\n\n    // Group and sort files\n    const groupedFiles: FileGroup[] = useMemo(() => {\n        if (!files) return [];\n        const groups = new Map<string, ParsedFile[]>();\n        \n        files.forEach(f => {\n            const subfolder = f.subfolder?.trim() || 'Ostatn√≠';\n            if (!groups.has(subfolder)) groups.set(subfolder, []);\n            groups.get(subfolder)?.push(f);\n        });\n\n        const sortedKeys = Array.from(groups.keys()).sort((a, b) => {\n            if (a === 'Ostatn√≠') return 1;\n            if (b === 'Ostatn√≠') return -1;\n            return a.localeCompare(b, 'cs');\n        });\n\n        const naturalCompare = (s1: string, s2: string) =>\n            s1.localeCompare(s2, 'cs', { numeric: true, sensitivity: 'base' });\n\n        const sortFiles = (groupFiles: ParsedFile[]): ParsedFile[] => {\n            return [...groupFiles].sort((a, b) => {\n                const commentA = a.file_comment?.trim();\n                const commentB = b.file_comment?.trim();\n                \n                if (commentA && commentB) return naturalCompare(commentA, commentB);\n                if (commentA && !commentB) return -1;\n                if (!commentA && commentB) return 1;\n                return naturalCompare(a.file_name, b.file_name);\n            });\n        };\n\n        return sortedKeys.map(key => ({\n            name: key,\n            displayName: key === 'Ostatn√≠' ? 'Ostatn√≠' : cleanFolderName(key, lesson?.courseCode),\n            files: sortFiles(groups.get(key) || [])\n        }));\n    }, [files, lesson?.courseCode]);\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex justify-end items-stretch p-4 isolate\">\n            {/* Backdrop */}\n            <div \n                className=\"absolute inset-0 bg-black/15 transition-opacity animate-in fade-in duration-200\"\n                onClick={onClose}\n            />\n\n            {/* Drawer Container */}\n            <div className=\"w-full flex justify-end items-start h-full pt-10 pb-10 relative z-10 pointer-events-none\">\n                {/* Drawer */}\n                <div className=\"w-[600px] bg-base-100 shadow-2xl rounded-2xl flex flex-col overflow-hidden border border-base-300 font-inter h-full animate-in slide-in-from-right duration-300 pointer-events-auto\">\n                    \n                    <DrawerHeader\n                        lesson={lesson}\n                        courseId={resolvedCourseId}\n                        selectedCount={selectedIds.length}\n                        isDownloading={isDownloading}\n                        activeTab={activeTab}\n                        onClose={onClose}\n                        onDownload={() => downloadZip(selectedIds, `${lesson?.courseCode}_files.zip`)}\n                        onTabChange={setActiveTab}\n                    />\n\n                    {/* Content Area */}\n                    <div \n                        ref={containerRef}\n                        className=\"flex-1 overflow-y-auto relative select-none\"\n                        onMouseDown={activeTab === 'files' ? handleMouseDown : undefined}\n                        style={{ cursor: activeTab === 'files' ? 'crosshair' : 'default' }}\n                    >\n                        <div ref={contentRef} className=\"min-h-full pb-20 relative\">\n                            <SelectionBox isDragging={isDragging} style={selectionBoxStyle} />\n                            \n                            {activeTab === 'files' && <DragHint show={showDragHint} />}\n\n                            {activeTab === 'files' ? (\n                                loading || !subjectsLoaded || !files ? (\n                                    <FileListSkeleton />\n                                ) : (\n                                    <FileList\n                                        groups={groupedFiles}\n                                        selectedIds={selectedIds}\n                                        fileRefs={fileRefs}\n                                        ignoreClickRef={ignoreClickRef}\n                                        onToggleSelect={toggleSelect}\n                                        onOpenFile={openFile}\n                                    />\n                                )\n                            ) : (\n                                <SuccessRateTab courseCode={lesson?.courseCode || ''} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SubjectFileDrawer/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SubjectFileDrawer/useDragSelection.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/root/reis/src/components/SubjectFileDrawer/useDragSelection.ts:55:13\n  53 |     useEffect(() => {\n  54 |         if (!isOpen) {\n> 55 |             setSelectedIds([]);\n     |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  56 |             setSelectionStart(null);\n  57 |             setSelectionEnd(null);\n  58 |             isDraggingRef.current = false;","line":55,"column":13,"nodeType":null,"endLine":55,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * useDragSelection Hook\n * \n * Manages drag-to-select behavior for file lists.\n */\n\nimport { useState, useRef, useCallback, useEffect, useMemo } from 'react';\n\ninterface UseDragSelectionOptions {\n    isOpen: boolean;\n    containerRef: React.RefObject<HTMLDivElement | null>;\n    contentRef: React.RefObject<HTMLDivElement | null>;\n    fileRefs: React.MutableRefObject<Map<string, HTMLDivElement>>;\n}\n\ninterface UseDragSelectionResult {\n    // State\n    selectedIds: string[];\n    isDragging: boolean;\n    selectionBoxStyle: { left: number; top: number; width: number; height: number } | null;\n    \n    // Refs\n    ignoreClickRef: React.MutableRefObject<boolean>;\n    \n    // Actions\n    handleMouseDown: (e: React.MouseEvent) => void;\n    toggleSelect: (id: string, e: React.MouseEvent) => void;\n    clearSelection: () => void;\n    setSelectedIds: React.Dispatch<React.SetStateAction<string[]>>;\n}\n\nexport function useDragSelection({\n    isOpen,\n    containerRef,\n    contentRef,\n    fileRefs\n}: UseDragSelectionOptions): UseDragSelectionResult {\n    // State\n    const [selectedIds, setSelectedIds] = useState<string[]>([]);\n    const [isDragging, setIsDragging] = useState(false);\n    const [selectionStart, setSelectionStart] = useState<{ x: number, y: number } | null>(null);\n    const [selectionEnd, setSelectionEnd] = useState<{ x: number, y: number } | null>(null);\n\n    // Refs\n    const autoScrollInterval = useRef<NodeJS.Timeout | null>(null);\n    const lastMousePos = useRef<{ x: number, y: number } | null>(null);\n    const initialSelectedIds = useRef<string[]>([]);\n    const isDraggingRef = useRef(false);\n    const selectionStartRef = useRef<{ x: number, y: number } | null>(null);\n    const ignoreClickRef = useRef(false);\n\n    // Reset on close\n    useEffect(() => {\n        if (!isOpen) {\n            setSelectedIds([]);\n            setSelectionStart(null);\n            setSelectionEnd(null);\n            isDraggingRef.current = false;\n        }\n    }, [isOpen]);\n\n    // Process selection based on mouse position\n    const processSelection = useCallback((clientX: number, clientY: number) => {\n        if (!selectionStartRef.current || !containerRef.current) return;\n\n        const rect = containerRef.current.getBoundingClientRect();\n        const x = clientX - rect.left + containerRef.current.scrollLeft;\n        const y = clientY - rect.top + containerRef.current.scrollTop;\n\n        const contentWidth = contentRef.current ? contentRef.current.scrollWidth : containerRef.current.scrollWidth;\n        const contentHeight = contentRef.current ? contentRef.current.scrollHeight : containerRef.current.scrollHeight;\n        \n        const clampedX = Math.max(0, Math.min(x, contentWidth));\n        const clampedY = Math.max(0, Math.min(y, contentHeight));\n\n        setSelectionEnd({ x: clampedX, y: clampedY });\n\n        const boxLeft = Math.min(selectionStartRef.current.x, clampedX);\n        const boxTop = Math.min(selectionStartRef.current.y, clampedY);\n        const boxRight = Math.max(selectionStartRef.current.x, clampedX);\n        const boxBottom = Math.max(selectionStartRef.current.y, clampedY);\n\n        const newSelectedIds = new Set(initialSelectedIds.current);\n\n        fileRefs.current.forEach((node, link) => {\n            if (node) {\n                const nodeLeft = node.offsetLeft;\n                const nodeTop = node.offsetTop;\n                const nodeRight = nodeLeft + node.offsetWidth;\n                const nodeBottom = nodeTop + node.offsetHeight;\n\n                const isIntersecting = !(\n                    boxLeft > nodeRight ||\n                    boxRight < nodeLeft ||\n                    boxTop > nodeBottom ||\n                    boxBottom < nodeTop\n                );\n\n                if (isIntersecting) {\n                    newSelectedIds.add(link);\n                }\n            }\n        });\n\n        setSelectedIds(Array.from(newSelectedIds));\n    }, [containerRef, contentRef, fileRefs]);\n\n    // Global mouse handlers\n    useEffect(() => {\n        if (!isOpen) return;\n\n        const handleGlobalMouseMove = (e: MouseEvent) => {\n            lastMousePos.current = { x: e.clientX, y: e.clientY };\n\n            // Auto-scroll logic\n            if (containerRef.current) {\n                const { top, bottom } = containerRef.current.getBoundingClientRect();\n                const threshold = 50;\n                const speed = 15;\n\n                if (e.clientY < top + threshold) {\n                    if (!autoScrollInterval.current) {\n                        autoScrollInterval.current = setInterval(() => {\n                            if (containerRef.current && containerRef.current.scrollTop > 0) {\n                                containerRef.current.scrollTop -= speed;\n                                if (lastMousePos.current) processSelection(lastMousePos.current.x, lastMousePos.current.y);\n                            }\n                        }, 16);\n                    }\n                } else if (e.clientY > bottom - threshold) {\n                    if (!autoScrollInterval.current) {\n                        autoScrollInterval.current = setInterval(() => {\n                            if (containerRef.current) {\n                                containerRef.current.scrollTop += speed;\n                                if (lastMousePos.current) processSelection(lastMousePos.current.x, lastMousePos.current.y);\n                            }\n                        }, 16);\n                    }\n                } else {\n                    if (autoScrollInterval.current) {\n                        clearInterval(autoScrollInterval.current);\n                        autoScrollInterval.current = null;\n                    }\n                }\n            }\n\n            // Drag detection threshold\n            if (!isDraggingRef.current && selectionStartRef.current && containerRef.current) {\n                const rect = containerRef.current.getBoundingClientRect();\n                const x = e.clientX - rect.left + containerRef.current.scrollLeft;\n                const y = e.clientY - rect.top + containerRef.current.scrollTop;\n                \n                const dx = x - selectionStartRef.current.x;\n                const dy = y - selectionStartRef.current.y;\n                if (Math.sqrt(dx * dx + dy * dy) > 5) {\n                    isDraggingRef.current = true;\n                    setIsDragging(true);\n                }\n            }\n\n            if (isDraggingRef.current) {\n                processSelection(e.clientX, e.clientY);\n            }\n        };\n\n        const handleGlobalMouseUp = () => {\n            if (autoScrollInterval.current) {\n                clearInterval(autoScrollInterval.current);\n                autoScrollInterval.current = null;\n            }\n\n            window.removeEventListener('mousemove', handleGlobalMouseMove);\n            window.removeEventListener('mouseup', handleGlobalMouseUp);\n\n            if (isDraggingRef.current) {\n                ignoreClickRef.current = true;\n                setTimeout(() => { ignoreClickRef.current = false; }, 100);\n                setIsDragging(false);\n                isDraggingRef.current = false;\n            }\n            setSelectionStart(null);\n            setSelectionEnd(null);\n            selectionStartRef.current = null;\n        };\n\n        if (selectionStart) {\n            window.addEventListener('mousemove', handleGlobalMouseMove);\n            window.addEventListener('mouseup', handleGlobalMouseUp);\n        }\n\n        return () => {\n            window.removeEventListener('mousemove', handleGlobalMouseMove);\n            window.removeEventListener('mouseup', handleGlobalMouseUp);\n            if (autoScrollInterval.current) clearInterval(autoScrollInterval.current);\n        };\n    }, [isOpen, selectionStart, processSelection, containerRef]);\n\n    const handleMouseDown = useCallback((e: React.MouseEvent) => {\n        const target = e.target as HTMLElement;\n        if (target.closest('.interactive') || target.tagName === 'BUTTON' || target.tagName === 'A') return;\n\n        if (containerRef.current) {\n            const rect = containerRef.current.getBoundingClientRect();\n            const x = e.clientX - rect.left + containerRef.current.scrollLeft;\n            const y = e.clientY - rect.top + containerRef.current.scrollTop;\n\n            setSelectionStart({ x, y });\n            setSelectionEnd({ x, y });\n            selectionStartRef.current = { x, y };\n            \n            initialSelectedIds.current = (e.ctrlKey || e.shiftKey || e.metaKey) ? selectedIds : [];\n            if (!e.ctrlKey && !e.shiftKey && !e.metaKey) {\n                setSelectedIds([]);\n            }\n        }\n    }, [containerRef, selectedIds]);\n\n    const toggleSelect = useCallback((id: string, e: React.MouseEvent) => {\n        e.stopPropagation();\n        setSelectedIds(prev =>\n            prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]\n        );\n    }, []);\n\n    const clearSelection = useCallback(() => {\n        setSelectedIds([]);\n    }, []);\n\n    // Calculate selection box style\n    const selectionBoxStyle = useMemo(() => {\n        if (!selectionStart || !selectionEnd) return null;\n        \n        const left = Math.min(selectionStart.x, selectionEnd.x);\n        const top = Math.min(selectionStart.y, selectionEnd.y);\n        const width = Math.abs(selectionEnd.x - selectionStart.x);\n        const height = Math.abs(selectionEnd.y - selectionStart.y);\n\n        return { left, top, width, height };\n    }, [selectionStart, selectionEnd]);\n\n    return {\n        selectedIds,\n        isDragging,\n        selectionBoxStyle,\n        ignoreClickRef,\n        handleMouseDown,\n        toggleSelect,\n        clearSelection,\n        setSelectedIds\n    };\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/SuccessRateTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/TermTile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/WeeklyCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/Card/Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/Card/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/Checkbox/Checkbox.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/Checkbox/Checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/Checkbox/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/CloseButton/CloseButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/CloseButton/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/SectionHeader/SectionHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/SectionHeader/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/Spinner/Spinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/Spinner/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/atoms/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/menuConfig.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ui/accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ui/sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/components/ui/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/constants/icons.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/content-injector.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4387,4390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4387,4390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4864,4867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4864,4867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5237,5240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5237,5240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5274,5277],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5274,5277],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Content Script Injector for REIS Chrome Extension\n * \n * Clean version: STRICTLY for DOM injection and message relay.\n * Data logic moved to SyncManager.ts.\n */\n\nimport { Messages, isIframeMessage } from \"./types/messages\";\nimport type { ContentToIframeMessage, DataRequestType } from \"./types/messages\";\nimport { SyncManager } from \"./services/SyncManager\";\nimport { registerExam, unregisterExam, fetchExamData } from \"./api/exams\";\nimport { fetchSubjects } from \"./api/subjects\";\n\nconst SYNC_INTERVAL = 5 * 60 * 1000;\nconst IFRAME_ID = \"reis-app-frame\";\n\nlet iframeElement: HTMLIFrameElement | null = null;\nlet syncManager: SyncManager | null = null;\n\n// =============================================================================\n// DOM Injection Logic\n// =============================================================================\n\nif (document.documentElement) {\n    document.documentElement.style.visibility = \"hidden\";\n}\n\nfunction injectAndInitialize() {\n    if (document.getElementById(IFRAME_ID)) return;\n    if (document.body?.innerHTML.includes(\"/system/login.pl\")) {\n        document.documentElement.style.visibility = \"visible\";\n        return;\n    }\n\n    injectIframe();\n    window.addEventListener(\"message\", handleMessage);\n    \n    syncManager = new SyncManager((data) => {\n        sendToIframe(Messages.syncUpdate(data));\n    });\n    syncManager.start(SYNC_INTERVAL);\n}\n\nfunction startInjection() {\n    if (document.body) injectAndInitialize();\n    else {\n        const observer = new MutationObserver((_, obs) => {\n            if (document.body) {\n                obs.disconnect();\n                injectAndInitialize();\n            }\n        });\n        observer.observe(document.documentElement, { childList: true });\n    }\n}\n\nstartInjection();\n\nfunction injectIframe() {\n    document.body.replaceChildren();\n    document.head.replaceChildren();\n\n    const favicon = document.createElement(\"link\");\n    favicon.rel = \"icon\";\n    favicon.href = chrome.runtime.getURL(\"mendelu_logo_128.png\");\n    document.head.appendChild(favicon);\n\n    const fontLink = document.createElement(\"link\");\n    fontLink.rel = \"stylesheet\";\n    fontLink.href = chrome.runtime.getURL(\"fonts/inter.css\");\n    document.head.appendChild(fontLink);\n\n    iframeElement = document.createElement(\"iframe\");\n    iframeElement.id = IFRAME_ID;\n    iframeElement.src = chrome.runtime.getURL(\"index.html\");\n    Object.assign(iframeElement.style, {\n        position: \"fixed\", top: \"0\", left: \"0\", width: \"100vw\", height: \"100vh\",\n        border: \"none\", margin: \"0\", padding: \"0\", overflow: \"hidden\", zIndex: \"2147483647\",\n        backgroundColor: \"#f8fafc\",\n    });\n\n    iframeElement.setAttribute(\"sandbox\", \"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-downloads\");\n    iframeElement.setAttribute(\"allow\", \"clipboard-write\");\n    document.body.appendChild(iframeElement);\n    document.body.style.cssText = \"margin: 0; padding: 0; overflow: hidden;\";\n    document.documentElement.style.cssText = \"margin: 0; padding: 0; overflow: hidden;\";\n    document.documentElement.style.visibility = \"visible\";\n}\n\n// =============================================================================\n// Message Handling\n// =============================================================================\n\nasync function handleMessage(event: MessageEvent) {\n    if (event.source !== iframeElement?.contentWindow) return;\n    const data = event.data;\n    if (!isIframeMessage(data)) return;\n\n    switch (data.type) {\n        case \"REIS_READY\":\n            if (syncManager?.getCachedData().lastSync) {\n                sendToIframe(Messages.syncUpdate(syncManager.getCachedData()));\n            }\n            break;\n        case \"REIS_REQUEST_DATA\":\n            await handleDataRequest(data.dataType);\n            break;\n        case \"REIS_FETCH\":\n            await handleFetchRequest(data.id, data.url, data.options);\n            break;\n        case \"REIS_ACTION\":\n            await handleAction(data.id, data.action, data.payload);\n            break;\n    }\n}\n\nasync function handleDataRequest(dataType: DataRequestType) {\n    try {\n        if (dataType === \"all\") {\n            if (!syncManager?.getCachedData().lastSync) await syncManager?.syncAllData();\n            sendToIframe(Messages.data(\"all\", syncManager?.getCachedData()));\n        } else {\n            let result: any = null;\n            if (dataType === \"exams\") result = await fetchExamData();\n            else if (dataType === \"subjects\") result = await fetchSubjects();\n            else if (dataType === \"files\") result = syncManager?.getCachedData().files;\n            sendToIframe(Messages.data(dataType, result));\n        }\n    } catch (e) {\n        sendToIframe(Messages.data(dataType, null, String(e)));\n    }\n}\n\nasync function handleFetchRequest(id: string, url: string, options?: any) {\n    try {\n        const response = await fetch(url, { ...options, credentials: \"include\" });\n        const text = await response.text();\n        sendToIframe(Messages.fetchResult(id, true, text));\n    } catch (e) {\n        sendToIframe(Messages.fetchResult(id, false, undefined, String(e)));\n    }\n}\n\nasync function handleAction(id: string, action: string, payload: any) {\n    try {\n        let result: any = null;\n        if (action === \"register_exam\") result = { success: await registerExam(payload.termId) };\n        else if (action === \"unregister_exam\") result = { success: await unregisterExam(payload.termId) };\n        sendToIframe(Messages.actionResult(id, true, result));\n    } catch (e) {\n        sendToIframe(Messages.actionResult(id, false, undefined, String(e)));\n    }\n}\n\nfunction sendToIframe(message: ContentToIframeMessage) {\n    iframeElement?.contentWindow?.postMessage(message, \"*\");\n}\n\nif (import.meta.hot) {\n    import.meta.hot.dispose(() => {\n        syncManager?.stop();\n        window.removeEventListener(\"message\", handleMessage);\n    });\n}\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/content.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/data/pagesData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/useExams.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/root/reis/src/hooks/data/useExams.ts:56:9\n  54 |\n  55 |     useEffect(() => {\n> 56 |         loadFromStorage();\n     |         ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  57 |\n  58 |         // Subscribe to sync updates\n  59 |         const unsubscribe = syncService.subscribe(() => {","line":56,"column":9,"nodeType":null,"endLine":56,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * useExams - Hook to access exam data from storage.\n * \n * Returns stored data immediately (stale-while-revalidate pattern).\n * Subscribes to sync updates for automatic refresh.\n * Includes error state for better UX feedback.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { StorageService, STORAGE_KEYS } from '../../services/storage';\nimport { syncService } from '../../services/sync';\nimport type { ExamSubject } from '../../types/exams';\n\nexport interface UseExamsResult {\n    exams: ExamSubject[];\n    isLoaded: boolean;\n    error: string | null;\n    lastSync: number | null;\n    retry: () => void;\n}\n\nexport function useExams(): UseExamsResult {\n    const [exams, setExams] = useState<ExamSubject[]>([]);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [lastSync, setLastSync] = useState<number | null>(null);\n\n    const loadFromStorage = useCallback(() => {\n        try {\n            const storedData = StorageService.get<ExamSubject[]>(STORAGE_KEYS.EXAMS_DATA);\n            const storedLastSync = StorageService.get<number>(STORAGE_KEYS.LAST_SYNC);\n\n            if (storedData && storedData.length > 0) {\n                setExams(storedData);\n                setError(null);\n            } else {\n                // No data yet - not an error, just empty\n                setExams([]);\n            }\n            setLastSync(storedLastSync);\n            setIsLoaded(true);\n        } catch (err) {\n            console.error('[useExams] Failed to load from storage:', err);\n            setError('Nepoda≈ôilo se naƒç√≠st data zkou≈°ek.');\n            setIsLoaded(true);\n        }\n    }, []);\n\n    const retry = useCallback(() => {\n        setIsLoaded(false);\n        setError(null);\n        loadFromStorage();\n    }, [loadFromStorage]);\n\n    useEffect(() => {\n        loadFromStorage();\n\n        // Subscribe to sync updates\n        const unsubscribe = syncService.subscribe(() => {\n            loadFromStorage();\n        });\n\n        return unsubscribe;\n    }, [loadFromStorage]);\n\n    return { exams, isLoaded, error, lastSync, retry };\n}\n\n","usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/useOutlookSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/useSchedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/useSubjects.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/useSubjects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/useSuccessRate.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/data/useSyncStatus.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useAutoBooking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useCalendarLogic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useCalendarNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useDragSelection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useFileActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useFileDownload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useMessageBridge.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/ui/useSearch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/useTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/hooks/useUserParams.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/documents/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/documents/parseServerFiles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/domHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/exam/helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/exam/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/exam/parseAvailableTerms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/exam/parseExamData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/exam/parseRegisteredTerms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/search/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/search/parseGlobalPeopleResults.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/search/parsePersonList.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/search/parseSubjectResults.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/parsers/search/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/SyncManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/spolky/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/spolky/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/spolky/spolkyService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/spolky/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/storage/StorageService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/storage/StorageService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/storage/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/storage/keys.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/SyncService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/SyncService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/outlookSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/syncExams.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/syncFiles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/syncSchedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/services/sync/syncSubjects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/styles/safelist.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/test/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/types/calendar.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/types/calendarTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/types/documents.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/types/exams.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/types/messages.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/types/schedule.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/__tests__/noHardcodedIds.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/apiUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/calendarUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/date.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/dateHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/examParser.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/examParser.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/fileUrl.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/holidays.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/pkce.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/pkce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/requestQueue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/searchUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/userParams.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/src/utils/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/root/reis/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
